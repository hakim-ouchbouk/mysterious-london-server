(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{148:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),s=n(22),o=n.n(s),i=n(8),c=n(28),d=n(53),l=n(72),u=n.n(l),p=n(73),b=n(74),j=n(20);var m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loggedIn:!1},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"REGISTER":case"LOG_IN":return Object(j.a)(Object(j.a)({},r),{},{loggedIn:!0});case"LOG_OUT":return{loggedIn:!1};case"UPDATE_USER_LIST":return Object(j.a)(Object(j.a)({},e),r);case"ERROR":return{error:r};default:return e}},h=n(36),g=n(24),f=n.n(g);var O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"CREAT_ATTRACTION":return Object(j.a)(Object(j.a)({},e),{},Object(h.a)({},r._id,r));case"GET_ATTRACTIONS":return Object(j.a)(Object(j.a)({},e),f.a.mapKeys(r,"_id"));case"GET_ATTRACTION":return Object(j.a)(Object(j.a)({},e),{},Object(h.a)({},r._id,r));case"DELETE_ATTRACTION":return f.a.omit(e,r._id);default:return e}};var x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"ATTRACTIONS_SEARCH_RESULTS":return Object(j.a)({},f.a.mapKeys(r,"_id"));default:return e}};var v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{count:0},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"GET_ATTRACTION_COUNT":return{count:r};default:return e}};var w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"FLASH_MESSAGE":return{data:r};default:return e}},y=Object(c.b)({user:m,attractions:O,attractionsSearchResults:x,addresses:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"GET_ADDRESSES":return r;default:return e}},attractionsCount:v,flashMessage:w}),S=n(9),E=n(10),A=n(13),k=n(12),T=n(17),C=(n(95),n(25).createBrowserHistory()),I=n(49),_=n(5),L=n.n(_),R=n(16),N=n(50),D=n.n(N),z=D.a.create({baseURL:"/api",withCredentials:!0});function F(e,t){var n=t.type,r=t.payload;e({type:n,payload:r}),setTimeout((function(){e({type:n,payload:""})}),3e3)}var G,M,B,U,H,P,q,V,K,W,Y,Z,Q=function(){return function(e){Object(R.a)(L.a.mark((function t(){return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z.post("/logout");case 2:e({type:"LOG_OUT"}),F(e,{type:"FLASH_MESSAGE",payload:"You are logged out"});case 4:case"end":return t.stop()}}),t)})))()}},$=function(e){return function(t){Object(R.a)(L.a.mark((function n(){var r,a;return L.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,z.get("/attractions/".concat(e));case 2:r=n.sent,a=r.data,t({type:"GET_ATTRACTION",payload:a});case 5:case"end":return n.stop()}}),n)})))()}},J=function(){return function(e){Object(R.a)(L.a.mark((function t(){var n,r;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z.get("/attractions/all");case 2:n=t.sent,r=n.data,e({type:"GET_ATTRACTIONS",payload:r});case 5:case"end":return t.stop()}}),t)})))()}},X=function(){return function(e){Object(R.a)(L.a.mark((function t(){var n,r,a;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z.get("/user/beenthere");case 2:return n=t.sent,t.next=5,z.get("/user/wanttovist");case 5:return r=t.sent,t.next=8,z.get("/user/list");case 8:a=t.sent,e({type:"UPDATE_USER_LIST",payload:{beenThere:n.data,wantToVisit:r.data,list:a.data}});case 10:case"end":return t.stop()}}),t)})))()}},ee=function(){return function(e){Object(R.a)(L.a.mark((function t(){var n;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z.get("/loggedin");case 2:n=t.sent,n.data.isLoggedIn||e({type:"LOG_OUT"});case 5:case"end":return t.stop()}}),t)})))()}},te=function(e){return function(t){Object(R.a)(L.a.mark((function n(){var r,a;return L.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,D.a.get("https://api.getaddress.io/autocomplete/".concat(e,"?expand=true&api-key=").concat("yWhQFstHyU-VFiGwfMxw5g32670"," "));case 2:r=n.sent,a=r.data,t({type:"GET_ADDRESSES",payload:a.suggestions});case 5:case"end":return n.stop()}}),n)})))()}},ne=function(e){return function(t){Object(R.a)(L.a.mark((function n(){var r,a;return L.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,z.post("/oauth",{token:e});case 2:r=n.sent,a=r.data,t({type:"LOG_IN",payload:a}),"POP"!==C.action?C.goBack():C.push("/");case 6:case"end":return n.stop()}}),n)})))()}},re=n(15),ae=n.n(re),se=ae.a.object({username:ae.a.string().pattern(new RegExp("^[A-Za-z0-9_-]*$")).message({"string.pattern.base":"Invalid username"}).min(5).max(30).required()}),oe=ae.a.object({email:ae.a.string().email({tlds:{allow:!1}}).required()}),ie=ae.a.object({password:ae.a.string().pattern(new RegExp("^[A-Za-z0-9_@./#&+-]*$")).message({"string.pattern.base":"Invalid password"}).min(6).max(20).required()}),ce=n(2),de=n(3),le=de.b.div(G||(G=Object(ce.a)(["\n  width: 40rem;\n  margin: 0 auto;\n  display: flex;\n  justify-content: center;\n  padding: 4.4rem 5.5rem;\n  box-shadow: 0 0.2rem 2rem rgba(0, 0, 0, 0.15);\n"]))),ue=de.b.input(M||(M=Object(ce.a)(["\n  width: 100%;\n  height: 5.2rem;\n  margin: 1.2rem 0;\n  font-family: inherit;\n  outline: none;\n  border: none;\n  padding: 1rem;\n  font-size: 1.8rem;\n  background-color: #f3f4f6;\n  border: ",";\n"])),(function(e){return e.error?"1px solid red":"none"})),pe=de.b.label(B||(B=Object(ce.a)(["\n  color: #212529;\n  font-size: 2rem;\n"]))),be=de.b.button(U||(U=Object(ce.a)(["\n  width: 100%;\n  height: 5.2rem;\n  display: flex;\n  justify-content: center;\n  gap: 20px;\n  align-items: center;\n  color: white;\n  background-color: #065f46;\n  border: none;\n  font-size: 2.5rem;\n  transition: all 300ms;\n  margin-top: 1.8rem;\n  &:hover {\n    background-color: #064e3b;\n  }\n"]))),je=de.b.button(H||(H=Object(ce.a)(["\n  width: 100%;\n  height: 5.2rem;\n  color: white;\n  margin-top: 2rem;\n  background-color: #de5246;\n  border: none;\n  font-size: 2.5rem;\n  transition: all 300ms;\n  &:hover {\n    background-color: #b91c1c;\n  }\n"]))),me=de.b.h1(P||(P=Object(ce.a)(["\n  position: relative;\n  font-size: 4.2rem;\n  color: #212529;\n  margin: 8.6rem 0 6rem 0;\n"]))),he=de.b.div(q||(q=Object(ce.a)(["\n  text-align: center;\n"]))),ge=de.b.p(V||(V=Object(ce.a)(["\n  color: red;\n  font-size: 1.6rem;\n  margin-bottom: 1.6rem;\n"]))),fe=de.b.p(K||(K=Object(ce.a)(["\n  position: absolute;\n  color: red;\n  font-size: 1.8rem;\n  right: 50%;\n  transform: translate(50%, 2rem);\n"]))),Oe=de.b.div(W||(W=Object(ce.a)(["\n  width: 80%;\n  margin: 0 auto 7rem auto;\n"]))),xe=Object(de.c)(Y||(Y=Object(ce.a)(["\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n"]))),ve=de.b.div(Z||(Z=Object(ce.a)(['\n  display: inline-block;\n  width: 38px;\n  height: 38px;\n\n  &::after {\n    content: " ";\n    display: inline-block;\n    width: 38px;\n    height: 38px;\n    border-radius: 50%;\n    border: 6px solid #fff;\n    border-color: #fff transparent #fff transparent;\n    animation: '," 1.2s linear infinite;\n  }\n"])),xe),we=n(0),ye=function(e){Object(A.a)(n,e);var t=Object(k.a)(n);function n(){var e;Object(S.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={username:"",password:"",email:"",usernameError:"",passwordError:"",emailError:"",loading:!1},e.usernameChange=function(t){e.setState({username:t.target.value})},e.passwordChange=function(t){e.setState({password:t.target.value})},e.emailChange=function(t){e.setState({email:t.target.value})},e.handleSubmit=function(t){t.preventDefault();var n=se.validate({username:e.state.username}).error;n&&e.setState({usernameError:n.details[0].message});var r=ie.validate({password:e.state.password}).error;r&&e.setState({passwordError:r.details[0].message});var a=oe.validate({email:e.state.email}).error;a&&e.setState({emailError:a.details[0].message}),n||r||a||(e.props.register(e.state),e.setState({loading:!0}))},e}return Object(E.a)(n,[{key:"render",value:function(){var e=this;return this.props.user&&this.props.user.loggedIn&&C.push("/"),Object(we.jsxs)(Oe,{children:[Object(we.jsx)(he,{children:Object(we.jsxs)(me,{children:["Register",this.props.user.error&&Object(we.jsx)(fe,{children:this.props.user.error})]})}),Object(we.jsx)(le,{children:Object(we.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(we.jsxs)("div",{children:[Object(we.jsx)(pe,{htmlFor:"username",children:"Email"}),Object(we.jsx)(ue,{value:this.state.email,onChange:this.emailChange,name:"email",type:"text",error:this.state.emailError,onBlur:function(t){oe.validate({email:t.target.value}).error?e.setState({emailError:oe.validate({email:t.target.value}).error.details[0].message}):e.setState({emailError:""})}}),Object(we.jsx)(ge,{children:this.state.emailError})]}),Object(we.jsxs)("div",{children:[Object(we.jsx)(pe,{htmlFor:"username",children:"Username"}),Object(we.jsx)(ue,{value:this.state.username,onChange:this.usernameChange,name:"username",type:"text",error:this.state.usernameError,onBlur:function(t){se.validate({username:t.target.value}).error?e.setState({usernameError:se.validate({username:t.target.value}).error.details[0].message}):e.setState({usernameError:""})}}),Object(we.jsx)(ge,{children:this.state.usernameError})]}),Object(we.jsxs)("div",{children:[Object(we.jsx)(pe,{htmlFor:"password",children:"Password"}),Object(we.jsx)(ue,{value:this.state.password,onChange:this.passwordChange,name:"password",type:"password",error:this.state.passwordError,onBlur:function(t){ie.validate({password:t.target.value}).error?(console.log(),e.setState({passwordError:ie.validate({password:t.target.value}).error.details[0].message})):e.setState({passwordError:""})}}),Object(we.jsx)(ge,{children:this.state.passwordError})]}),Object(we.jsxs)(be,{type:"submit",children:[this.state.loading&&Object(we.jsx)(ve,{}),"Register"]})]})})]})}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(t.loading&&e.user.error)return{loading:!1}}}]),n}(a.a.Component),Se=Object(i.b)((function(e){return{user:e.user}}),{register:function(e){return function(t){Object(R.a)(L.a.mark((function n(){var r,a;return L.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,z.post("/register",e);case 2:r=n.sent,(a=r.data).username?(t({type:"REGISTER",payload:a}),"POP"!==C.action?C.goBack():C.push("/")):F(t,{type:"ERROR",payload:a});case 5:case"end":return n.stop()}}),n)})))()}}})(ye),Ee=ae.a.object({username:ae.a.string().pattern(new RegExp("^[A-Za-z0-9_-]*$")).message({"string.pattern.base":"Invalid username"}).min(5).max(30).required()}),Ae=ae.a.object({password:ae.a.string().pattern(new RegExp("^[A-Za-z0-9_@./#&+-]*$")).message({"string.pattern.base":"Invalid password"}).max(20).required()}),ke=n(40);var Te=Object(i.b)(null,{googleAuth:ne})((function(e){var t=e.googleAuth,n=e.text;return Object(we.jsx)("div",{children:Object(we.jsx)(ke.GoogleLogin,{render:function(e){return Object(we.jsx)("span",{onClick:e.onClick,children:n})},clientId:"326110060194-telj65nuuhr9boqm2ru1fknvg0e73dvl.apps.googleusercontent.com",buttonText:"Login",onSuccess:function(e){t(e.tokenId)},onFailure:function(e){console.log("LOGGIN FAILED"),console.log(e)},cookiePolicy:"single_host_origin",style:{marginTop:"100px"}})})})),Ce=n(30),Ie=function(e){Object(A.a)(n,e);var t=Object(k.a)(n);function n(){var e;Object(S.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={username:"",password:"",usernameError:"",passwordError:"",loading:!1},e.usernameChange=function(t){e.setState({username:t.target.value})},e.passwordChange=function(t){e.setState({password:t.target.value})},e.handleSubmit=function(t){t.preventDefault();var n=Ee.validate({username:e.state.username}).error;n&&e.setState({usernameError:n.details[0].message});var r=Ae.validate({password:e.state.password}).error;r&&e.setState({passwordError:r.details[0].message}),n||r||(e.props.login(e.state),e.setState({loading:!0}))},e}return Object(E.a)(n,[{key:"render",value:function(){var e=this;return this.props.user&&this.props.user.loggedIn&&C.push("/"),Object(we.jsxs)(Oe,{children:[Object(we.jsx)(he,{children:Object(we.jsxs)(me,{children:["Login",this.props.user.error&&Object(we.jsx)(fe,{children:this.props.user.error})]})}),Object(we.jsx)(le,{children:Object(we.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(we.jsxs)("div",{children:[Object(we.jsx)(pe,{htmlFor:"username",children:"Username"}),Object(we.jsx)(ue,{error:this.state.usernameError,value:this.state.username,onChange:this.usernameChange,name:"username",type:"text",onBlur:function(t){Ee.validate({username:t.target.value}).error?e.setState({usernameError:Ee.validate({username:t.target.value}).error.details[0].message}):e.setState({usernameError:""})}}),Object(we.jsx)(ge,{children:this.state.usernameError})]}),Object(we.jsxs)("div",{children:[Object(we.jsx)(pe,{htmlFor:"password",children:"Password"}),Object(we.jsx)(ue,{error:this.state.passwordError,value:this.state.password,onChange:this.passwordChange,name:"password",type:"password",onBlur:function(t){Ae.validate({password:t.target.value}).error?(console.log(),e.setState({passwordError:Ae.validate({password:t.target.value}).error.details[0].message})):e.setState({passwordError:""})}}),Object(we.jsx)(ge,{children:this.state.passwordError})]}),Object(we.jsxs)(be,{type:"submit",children:[this.state.loading&&Object(we.jsx)(ve,{}),"Login"]}),Object(we.jsx)(he,{style:{marginTop:"15px"},children:"Or"}),Object(we.jsx)(Te,{text:Object(we.jsxs)(je,{children:["Login with ",Object(we.jsx)(Ce.f,{})]})})]})})]})}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(t.loading&&e.user.error)return{loading:!1}}}]),n}(a.a.Component),_e=Object(i.b)((function(e){return{user:e.user}}),{login:function(e){return function(t){Object(R.a)(L.a.mark((function n(){var r,a;return L.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,z.post("/login",e);case 2:r=n.sent,(a=r.data).username?(t({type:"LOG_IN",payload:a}),"POP"!==C.action?C.goBack():C.push("/")):F(t,{type:"ERROR",payload:a});case 5:case"end":return n.stop()}}),n)})))()}}})(Ie),Le=n(14),Re=n(152),Ne=n(151),De=n(153);var ze,Fe,Ge,Me,Be,Ue,He,Pe,qe,Ve,Ke,We,Ye,Ze,Qe,$e,Je,Xe,et,tt,nt,rt,at,st,ot,it,ct,dt,lt,ut,pt,bt,jt,mt,ht,gt,ft,Ot,xt,vt,wt,yt,St,Et,At,kt,Tt,Ct,It,_t,Lt,Rt,Nt,Dt,zt=Object(i.b)(null,{logout:Q})((function(e){var t=e.logout;return Object(we.jsx)("div",{children:Object(we.jsx)(ke.GoogleLogout,{render:function(e){return Object(we.jsx)("span",{onClick:e.onClick,children:"Logout"})},clientId:"326110060194-telj65nuuhr9boqm2ru1fknvg0e73dvl.apps.googleusercontent.com",buttonText:"Logout",onLogoutSuccess:function(){t()}})})})),Ft=de.b.p(ze||(ze=Object(ce.a)(["\n  color: #065f46;\n  padding: 0;\n  margin: 0;\n  margin-right: 60px;\n  text-transform: uppercase;\n  font-weight: bold;\n  font-size: 2rem;\n"]))),Gt=de.b.p(Fe||(Fe=Object(ce.a)(["\n  color: #065f46;\n  padding: 0;\n  margin: 0;\n  margin-right: 15px;\n  text-transform: uppercase;\n  font-size: 2rem;\n\n  @media (max-width: 1086px) {\n    margin-right: 10px;\n  }\n\n"]))),Mt=function(e){Object(A.a)(n,e);var t=Object(k.a)(n);function n(){var e;Object(S.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).renderGoogleLogout=function(){return e.props.user.loggedIn&&e.props.user.oauth?Object(we.jsx)(zt,{}):""},e}return Object(E.a)(n,[{key:"render",value:function(){var e=this;return Object(we.jsx)(Re.a,{style:{backgroundColor:"#F3F4F6",borderBottom:"1px solid #D1D5DB",height:"45px"},expand:"lg",children:Object(we.jsxs)(Ne.a,{children:[Object(we.jsx)(Re.a.Brand,{as:Le.a,to:"/",children:Object(we.jsx)(Ft,{children:"Mysterious London"})}),Object(we.jsx)(Re.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(we.jsx)(Re.a.Collapse,{id:"basic-navbar-nav",children:Object(we.jsxs)(De.a,{className:"me-auto",children:[Object(we.jsx)(De.a.Link,{as:Le.a,to:"/",children:Object(we.jsx)(Gt,{children:"Attractions"})}),Object(we.jsx)(De.a.Link,{as:Le.a,to:"/attractions/map",children:Object(we.jsx)(Gt,{children:"Map"})}),this.props.user.loggedIn&&Object(we.jsx)(De.a.Link,{as:Le.a,to:"/create",children:Object(we.jsx)(Gt,{children:"Add Attraction"})}),this.props.user.loggedIn&&Object(we.jsx)(De.a.Link,{as:Le.a,to:"/myattractions",children:Object(we.jsx)(Gt,{children:"Lists"})}),Object(we.jsx)(De.a.Link,{as:Le.a,to:"/attractions/search",children:Object(we.jsx)(Gt,{children:"Search"})}),!this.props.user.loggedIn&&Object(we.jsx)(De.a.Link,{as:Le.a,to:"/register",children:Object(we.jsx)(Gt,{children:"Register"})}),this.props.user.loggedIn&&!this.props.user.oauth&&Object(we.jsx)(De.a.Link,{onClick:function(){e.props.logout()},children:Object(we.jsx)(Gt,{children:"Logout"})}),!this.props.user.loggedIn&&Object(we.jsx)(De.a.Link,{as:Le.a,to:"/login",children:Object(we.jsx)(Gt,{children:"Login"})}),this.props.user.loggedIn&&this.props.user.oauth&&Object(we.jsx)(De.a.Link,{children:Object(we.jsx)(Gt,{children:Object(we.jsx)(zt,{})})})]})})]})})}}]),n}(a.a.Component),Bt=Object(i.b)((function(e){return{user:e.user}}),{logout:Q,googleAuth:ne})(Mt),Ut=ae.a.object({name:ae.a.string().min(3).max(50).required()}),Ht=ae.a.object({description:ae.a.string().min(20).required()}),Pt=ae.a.object({location:ae.a.string().required()}),qt=de.b.div(Ge||(Ge=Object(ce.a)(["\n  width: 60rem;\n  margin: 0 auto;\n  margin-top: 4.8rem;\n  display: flex;\n  justify-content: center;\n  padding: 4.4rem 5.5rem;\n  box-shadow: 0 2px 2rem rgba(0, 0, 0, 0.15);\n\n  @media (max-width: 1024px) {\n    width: 50rem;\n    \n  }\n  \n  @media (max-width: 768px) {\n    width: 40rem;\n  }\n\n"]))),Vt=de.b.input(Me||(Me=Object(ce.a)(["\n  width: 100%;\n  height: 5.2rem;\n  margin: 1.2rem 0;\n  font-family: sans-serif;\n  outline: none;\n  border: none;\n  padding: 1rem;\n  font-size: 1.8rem;\n  background-color: #f3f4f6;\n  border: ",";\n"])),(function(e){return e.error?"1px solid red":"none"})),Kt=de.b.label(Be||(Be=Object(ce.a)(["\n  color: #212529;\n  font-size: 2.4rem;\n  font-weight: bold;\n"]))),Wt=de.b.button(Ue||(Ue=Object(ce.a)(["\n  display: flex;\n  align-items: center;\n  gap: 30px;\n  justify-content: center;\n  width: 100%;\n  height: 5.2rem;\n  color: white;\n  background-color: #065f46;\n  border: none;\n  font-size: 2.5rem;\n  transition: all 300ms;\n  &:hover {\n    background-color: #064e3b;\n  }\n"]))),Yt=de.b.h1(He||(He=Object(ce.a)(["\n  position: relative;\n  font-size: 4.2rem;\n  color: #212529;\n  margin: 4.2rem 0 9.2rem 0;\n"]))),Zt=de.b.div(Pe||(Pe=Object(ce.a)(["\n  text-align: center;\n"]))),Qt=de.b.textarea(qe||(qe=Object(ce.a)(["\n  width: 100%;\n  height: 16rem;\n  border: none;\n  outline: none;\n  margin: 1.2rem 0;\n  padding: 1.2rem;\n  line-height: 1.3;\n  background-color: #f3f4f6;\n  border: ",";\n"])),(function(e){return e.error?"1px solid red":"none"})),$t=de.b.select(Ve||(Ve=Object(ce.a)(["\n  width: 100%;\n  height: 5.2rem;\n  border: none;\n  outline: none;\n  margin-bottom: 3rem;\n  padding: 1.2rem;\n  background-color: #f3f4f6;\n"]))),Jt=de.b.p(Ke||(Ke=Object(ce.a)(["\n  position: absolute;\n  font-size: 2.5rem;\n  color: #064e3b;\n  background-color: #d1fae5;\n  border-radius: 1rem;\n  right: 50%;\n  transform: translate(50%, 2rem);\n  padding: 1.2rem;\n  border-radius: 1rem;\n  margin-bottom: 3rem;\n"]))),Xt=function(e){Object(A.a)(n,e);var t=Object(k.a)(n);function n(e){var r;return Object(S.a)(this,n),(r=t.call(this,e)).onNameChange=function(e){r.setState({name:e.target.value})},r.onDescriptionChange=function(e){r.setState({description:e.target.value})},r.onTermChange=function(e){r.setState({term:e.target.value}),f.a.debounce((function(){r.props.getAdresses(r.state.term),0===r.props.addresses.length?r.setState({locationError:"It must be a valid UK address"}):r.setState({locationError:""})}),500)()},r.onLocationChange=function(e){r.setState({location:e.target.value})},r.onImageChange=function(e){r.setState({images:e.target.files}),r.setState({imagesError:""})},r.handleSubmit=function(e){e.preventDefault();var t=Ut.validate({name:r.state.name}).error;t&&r.setState({nameError:t.details[0].message});var n=Ht.validate({description:r.state.description}).error;n&&r.setState({descriptionError:n.details[0].message});var a=r.props.addresses,s="";a.length>0&&""===r.state.location&&(r.setState({location:a[0].address}),s=a[0].address);var o=Pt.validate({location:r.state.location||s}).error;o&&r.setState({locationError:o.details[0].message});var i=r.state.images?"":"You must upload at least one image";i&&r.setState({imagesError:i}),t||o||n||i||(r.props.createAttraction(r.state),r.setState({location:""}),r.setState({loading:!0}))},r.renderAdressDropdown=function(){var e=r.props.addresses;return Object(we.jsx)($t,{onClick:r.onLocationChange,children:e.map((function(e,t){var n=e.address;return Object(we.jsx)("option",{value:n,children:n},t)}))})},r.state={name:"",description:"",location:"",images:null,term:"",nameError:"",descriptionError:"",locationError:"",imagesError:"",loading:!1},r}return Object(E.a)(n,[{key:"renderForm",value:function(){var e=this;return this.props.user.loggedIn||C.push("/"),Object(we.jsxs)("div",{children:[Object(we.jsx)(Zt,{children:Object(we.jsxs)(Yt,{children:["Add Attraction",this.props.message&&Object(we.jsx)(Jt,{children:this.props.message})]})}),Object(we.jsx)(qt,{children:Object(we.jsxs)("form",{autoComplete:"off",onSubmit:this.handleSubmit,encType:"multipart/form-data",children:[Object(we.jsxs)("div",{children:[Object(we.jsx)(Kt,{htmlFor:"name",children:"Name"}),Object(we.jsx)(Vt,{type:"text",name:"name",onChange:this.onNameChange,value:this.state.name,error:this.state.nameError,onBlur:function(t){var n=Ut.validate({name:t.target.value}).error;n?e.setState({nameError:n.details[0].message}):e.setState({nameError:""})}}),Object(we.jsx)(ge,{children:this.state.nameError})]}),Object(we.jsxs)("div",{children:[Object(we.jsx)(Kt,{htmlFor:"description",children:"Description"}),Object(we.jsx)(Qt,{name:"description",onChange:this.onDescriptionChange,value:this.state.description,error:this.state.descriptionError,onBlur:function(t){var n=Ht.validate({description:t.target.value}).error;n?e.setState({descriptionError:n.details[0].message}):e.setState({descriptionError:""})}}),Object(we.jsx)(ge,{children:this.state.descriptionError})]}),Object(we.jsxs)("div",{children:[Object(we.jsx)(Kt,{htmlFor:"location",children:"Address"}),Object(we.jsx)(Vt,{type:"text",name:"location",onChange:this.onTermChange,value:this.state.term,error:this.state.locationError,onBlur:function(t){var n=Pt.validate({location:t.target.value}).error;n?e.setState({locationError:n.details[0].message}):0!==e.props.addresses.length&&e.setState({locationError:""})}}),Object(we.jsx)(ge,{children:this.state.locationError})]}),this.props.addresses.length>0&&this.renderAdressDropdown(),Object(we.jsxs)("div",{children:[Object(we.jsx)(Kt,{htmlFor:"image",children:"Upload images"}),Object(we.jsx)(Vt,{style:{backgroundColor:"white"},onChange:this.onImageChange,type:"file",name:"images",multiple:!0}),Object(we.jsx)(ge,{children:this.state.imagesError})]}),Object(we.jsxs)(Wt,{type:"submit",children:[this.state.loading&&Object(we.jsx)(ve,{}),"Submit Attraction"]})]})})]})}},{key:"render",value:function(){return Object(we.jsx)(Oe,{children:this.renderForm()})}}]),n}(a.a.Component),en=Object(i.b)((function(e){return{addresses:e.addresses,user:e.user,message:e.flashMessage.data}}),{createAttraction:function(e){var t=e.name,n=e.location,r=e.description,a=e.images,s=new FormData;s.append("name",t),s.append("description",r),s.append("location",n);var o,i=Object(I.a)(a);try{for(i.s();!(o=i.n()).done;){var c=o.value;s.append("images",c)}}catch(d){i.e(d)}finally{i.f()}return function(e){Object(R.a)(L.a.mark((function t(){var n,r;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z.post("/attractions",s);case 2:n=t.sent,r=n.data,e({type:"CREAT_ATTRACTION",payload:r}),F(e,{type:"FLASH_MESSAGE",payload:"Attraction has been created"}),C.push("/attractions/".concat(r._id));case 7:case"end":return t.stop()}}),t)})))()}},getAdresses:te,isLoggedIn:ee})(Xt),tn=de.b.div(We||(We=Object(ce.a)(["\n  display: grid;\n  grid-template-columns: repeat(4, 1fr);\n  row-gap: 4rem;\n  column-gap: 2rem;\n  margin-top: 64px;\n  width: 90%;\n  margin: 0 auto;\n  margin-top: 4.8rem;\n  justify-items: center;\n\n\n  @media (max-width: 1024px) {\n    grid-template-columns: repeat(3, 1fr);\n  }\n\n  @media (max-width: 768px) {\n    grid-template-columns: repeat(2, 1fr);\n  }\n  @media (max-width: 600px) {\n    grid-template-columns: repeat(1, 1fr);\n  }\n"]))),nn=de.b.figure(Ye||(Ye=Object(ce.a)(["\n  width: 24rem;\n  background-color: #fff;\n  box-shadow: 0 0.2rem 2rem rgba(0, 0, 0, 0.2);\n  overflow: hidden;\n  cursor: pointer;\n  align-self: start;\n  transition: all 0.3s;\n  justify-content: space-between;\n  z-index: 10;\n  .link {\n    text-decoration: none;\n  }\n\n  &:hover {\n    transform: scale(1.05);\n  }\n"]))),rn=de.b.img(Ze||(Ze=Object(ce.a)(["\n  width: 24rem;\n  height: 16rem;\n  object-fit: cover;\n"]))),an=de.b.div(Qe||(Qe=Object(ce.a)(['\n  padding: 1.2rem;\n  font-size: 1.6rem;\n  align-self: start;\n\n  .name {\n    text-decoration: none;\n    color: #065f46;\n    margin-bottom: 1.2rem;\n    font-size: 2.5rem;\n    font-weight: 500;\n  }\n  .subtitle {\n    font-family: "Times New Roman", Times, serif;\n    text-transform: lowercase;\n    color: black;\n    font-size: 1.8rem;\n    font-weight: 500;\n  }\n\n  .subtitle::first-letter {\n    text-transform: uppercase;\n  }\n']))),sn=de.b.div($e||($e=Object(ce.a)(["\n  width: 30rem;\n  margin: 2.4rem auto;\n"]))),on=de.b.button(Je||(Je=Object(ce.a)(["\n  width: 100%;\n  /* height: 52px; */\n  color: white;\n  background-color: #065f46;\n  border: none;\n  /* border-radius: 10px; */\n  font-size: 2.5rem;\n  transition: all 300ms;\n  padding: 1.2rem 2.4rem;\n  &:hover {\n    background-color: #064e3b;\n  }\n"]))),cn=de.b.h1(Xe||(Xe=Object(ce.a)(["\n  position: relative;\n  font-size: 4.2rem;\n  color: #212529;\n  margin: 4rem 0 10rem 0;\n"]))),dn=de.b.div(et||(et=Object(ce.a)(["\n  text-align: center;\n"]))),ln=de.b.p(tt||(tt=Object(ce.a)(["\n  position: absolute;\n  font-size: 1.8rem;\n  color: #064e3b;\n  top: 0;\n  right: 50%;\n  background-color: #d1fae5;\n  padding: 1.2rem;\n  border-radius: 1rem;\n  transform: translate(50%, 6.5rem);\n"]))),un=function(e){Object(A.a)(n,e);var t=Object(k.a)(n);function n(){var e;Object(S.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={buttonVisibilty:""},e.renderAttractions=function(){return e.props.attractions?Object(we.jsx)(tn,{children:e.props.attractions.map((function(e){var t=e.name,n=e.description,r=e._id,a=e.images;return Object(we.jsx)(nn,{children:Object(we.jsxs)(Le.a,{className:"link",to:"/attractions/".concat(r),children:[Object(we.jsx)(rn,{src:a[0].url,alt:"pic"}),Object(we.jsxs)(an,{children:[Object(we.jsx)("p",{className:"name",children:t}),Object(we.jsxs)("p",{className:"subtitle",children:[n.substring(0,101),"..."]})]})]})},r)}))}):""},e.renderGetAllButton=function(){return!e.props.attractions||e.props.count<=8||e.props.attractions.length>8?"":Object(we.jsxs)(on,{style:{visibility:e.state.buttonVisibilty},onClick:function(){e.props.getAllAttractions(),e.setState({buttonVisibilty:"hidden"})},children:["See All ",e.props.count," Attractions"]})},e}return Object(E.a)(n,[{key:"componentDidMount",value:function(){this.props.getAttractions(),this.props.getAttractionCount()}},{key:"render",value:function(){return Object(we.jsxs)(Oe,{children:[Object(we.jsx)(dn,{children:Object(we.jsxs)(cn,{children:["All the places in London",this.props.flashMessage&&Object(we.jsx)(ln,{children:this.props.flashMessage})]})}),this.renderAttractions(),Object(we.jsx)("br",{}),Object(we.jsx)(sn,{children:this.renderGetAllButton()})]})}}]),n}(a.a.Component),pn=Object(i.b)((function(e){var t=e.attractions,n=e.attractionsCount,r=e.flashMessage;return{attractions:f.a.values(t),count:n.count,flashMessage:r.data}}),{getAttractions:function(){return function(e){Object(R.a)(L.a.mark((function t(){var n,r;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z.get("/attractions");case 2:n=t.sent,r=n.data,e({type:"GET_ATTRACTIONS",payload:r});case 5:case"end":return t.stop()}}),t)})))()}},getAllAttractions:J,getAttractionCount:function(){return function(e){Object(R.a)(L.a.mark((function t(){var n,r;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z.get("/attractions/count");case 2:n=t.sent,r=n.data,e({type:"GET_ATTRACTION_COUNT",payload:r.count});case 5:case"end":return t.stop()}}),t)})))()}}})(un),bn=n(42),jn=function(){return Object(we.jsx)("div",{children:Object(we.jsx)("img",{style:{transform:"translate(0,-100%)"},alt:"marker",src:"/marker.png",height:"20px",width:"20px"})})},mn=function(e){Object(A.a)(n,e);var t=Object(k.a)(n);function n(){return Object(S.a)(this,n),t.apply(this,arguments)}return Object(E.a)(n,[{key:"render",value:function(){return this.props.geocode?Object(we.jsx)("div",{style:{height:"400px",width:"400px"},children:Object(we.jsx)(bn.a,{bootstrapURLKeys:{key:"AIzaSyCkM2KZSzCVr9aS-Vuq_KhGDnLYR3vboEk"},defaultCenter:this.props.geocode,defaultZoom:11,children:Object(we.jsx)(jn,{lat:this.props.geocode.lat,lng:this.props.geocode.lng})})}):""}}]),n}(r.Component),hn=n(44),gn=n.n(hn),fn=de.b.div(nt||(nt=Object(ce.a)(["\n  display: grid;\n  grid-template-columns: 2fr 1fr;\n  row-gap: 4.8rem;\n  margin-top: 3.2rem;\n  margin-bottom: 4.8rem;\n"]))),On=de.b.h1(rt||(rt=Object(ce.a)(["\n  font-size: 4.8rem;\n  color: #065f46;\n  position: relative;\n  .location {\n    font-size: 2rem;\n    margin-top: 1rem;\n    margin-bottom: 1.6rem;\n  }\n"]))),xn=de.b.button(at||(at=Object(ce.a)(["\n  padding: 1.2rem;\n  border: none;\n  background-color: white;\n  color: #065f46;\n  background-color:#F9FAFB ;\n  .number {\n    font-size: 1.8rem;\n  }\n\n  .text {\n    font-size: 1.6rem;\n  }\n"]))),vn=Object(de.b)(Ce.c)(st||(st=Object(ce.a)(["\n  color: #065f46;\n  font-size: 2rem;\n  margin-bottom: 1rem;\n"]))),wn=Object(de.b)(Ce.g)(ot||(ot=Object(ce.a)(["\n  color: #065f46;\n  font-size: 2rem;\n  margin-bottom: 1rem;\n"]))),yn=Object(de.b)(Ce.e)(it||(it=Object(ce.a)(["\n  color: #065f46;\n  font-size: 2rem;\n  margin-bottom: 1rem;\n"]))),Sn=de.b.div(ct||(ct=Object(ce.a)(["\n  position: relative;\n"]))),En=de.b.div(dt||(dt=Object(ce.a)(["\n  display: flex;\n  overflow: hidden;\n  gap: 1rem;\n  margin-bottom: 5rem;\n  position: relative;\n"]))),An=de.b.img(lt||(lt=Object(ce.a)(["\n  height: 40rem;\n  width: auto;\n"]))),kn=Object(de.b)(Ce.a)(ut||(ut=Object(ce.a)(["\n  position: absolute;\n  left: -7rem;\n  top: 50%;\n  z-index: 10;\n  cursor: pointer;\n  font-size: 5rem;\n  transform: translate(0, -50%);\n  color: #065f46;\n\n  @media (max-width: 768px) {\n    font-size: 3rem;\n    left: -4rem;\n  }\n"]))),Tn=Object(de.b)(Ce.b)(pt||(pt=Object(ce.a)(["\n  position: absolute;\n  right: -7rem;\n  top: 50%;\n  z-index: 10;\n  font-size: 5rem;\n  transform: translate(0, -50%);\n  cursor: pointer;\n  color: #065f46;\n\n  @media (max-width: 768px) {\n    font-size: 3rem;\n    right: -4rem;\n  }\n"]))),Cn=de.b.div(bt||(bt=Object(ce.a)(["\n  background-color: #ecfdf5;\n"]))),In=de.b.div(jt||(jt=Object(ce.a)(["\n  width: 80%;\n  display: grid;\n  grid-template-columns: 3fr 1fr;\n  column-gap: 3rem;\n  padding: 6.4rem;\n  margin: 0 auto;\n\n  @media (max-width: 1024px) {\n    grid-template-columns: 1fr;\n    justify-items: center;\n    width: 100%;\n  }\n"]))),_n=de.b.p(mt||(mt=Object(ce.a)(['\n  font-size: 2rem;\n  font-family: "IBM Plex Serif";\n  line-height: 1.5;\n  color: #111827;\n  margin-bottom: 4.8rem;\n  /* word-break: break-all; */\n  @media (max-width: 1024px) {\n    font-size: 1.8rem;\n  }\n']))),Ln=de.b.div(ht||(ht=Object(ce.a)(["\n  width: 60%;\n  grid-column: 1 / -1;\n  margin-bottom: 4.8rem;\n  margin-top: 2.5rem;\n  @media (max-width: 1024px) {\n    width: 100%;\n  }\n"]))),Rn=de.b.textarea(gt||(gt=Object(ce.a)(["\n  background-color: #f9fafb;\n  width: 100%;\n  display: block;\n  margin-bottom: 1.2rem;\n  border: none;\n  padding: 1.2rem;\n  outline: none;\n  border: ",";\n  &:focus {\n    box-shadow: 0 0 0 1px #065f46;\n  }\n"])),(function(e){return e.error?"1px solid red":"none"})),Nn=de.b.button(ft||(ft=Object(ce.a)(["\n  width: 100%;\n  padding: 1.2rem;\n  border: none;\n  background-color: #065f46;\n  color: #fff;\n  transition: all 0.3s;\n  &:hover {\n    background-color: #064e3b;\n  }\n"]))),Dn=de.b.div(Ot||(Ot=Object(ce.a)(["\n  margin: 1.2rem 0;\n"]))),zn=Object(de.b)(Ce.d)(xt||(xt=Object(ce.a)(["\n  color: #065f46;\n  font-size: 4.8rem;\n"]))),Fn=de.b.div(vt||(vt=Object(ce.a)(["\n  display: flex;\n  gap: 1rem;\n  align-items: center;\n  .name {\n    font-weight: bold;\n    margin: 0;\n  }\n"]))),Gn=de.b.button(wt||(wt=Object(ce.a)(["\n  margin-left: 1rem;\n  border: none;\n  background-color: #065f46;\n  padding: 0.8rem 1.6rem;\n  color: white;\n"]))),Mn=de.b.div(yt||(yt=Object(ce.a)(["\n  width: 90%;\n  .title {\n    font-size: 4rem;\n    margin-bottom: 2.5rem;\n  }\n\n  @media (max-width: 1024px) {\n    width: 100%;\n  }\n"]))),Bn=de.b.div(St||(St=Object(ce.a)(["\n  margin-bottom: 4.8rem;\n  .content {\n    font-size: 2rem;\n    line-height: 1.3;\n    font-family: Arial, Helvetica, sans-serif;\n    letter-spacing: 0.01px;\n  }\n"]))),Un=de.b.button(Et||(Et=Object(ce.a)(["\n  background-color: #f87171;\n  border: none;\n  padding: 0.8rem 1.6rem;\n  color: black;\n"]))),Hn=de.b.button(At||(At=Object(ce.a)(["\n  background-color: #fde68a;\n  border: none;\n  padding: 0.8rem 1.6rem;\n  margin-right: 2rem;\n  .link {\n    text-decoration: none;\n    color: black;\n  }\n"]))),Pn=de.b.p(kt||(kt=Object(ce.a)(["\n  font-size: 2.5rem;\n  font-weight: bold;\n"]))),qn=de.b.button(Tt||(Tt=Object(ce.a)(["\n  padding: 1.2rem;\n  border: none;\n  background-color: #065f46;\n  transition: all 0.3s;\n  margin-right: 3rem;\n  margin-left: 1rem;\n  .link {\n    color: #fff;\n    text-decoration: none;\n  }\n\n  &:hover {\n    background-color: #064e3b;\n  }\n"]))),Vn=de.b.button(Ct||(Ct=Object(ce.a)(["\n  padding: 1.2rem;\n  border: none;\n  background-color: #d1fae5;\n  transition: all 0.3s;\n\n  .link {\n    color: #064e3b;\n    text-decoration: none;\n  }\n\n  &:hover {\n    background-color: #a7f3d0;\n  }\n"]))),Kn=de.b.p(It||(It=Object(ce.a)(["\n  position: absolute;\n  font-size: 1.8rem;\n  color: #064e3b;\n  top: -25px;\n  left: 50%;\n  background-color: #d1fae5;\n  padding: 1rem;\n  border-radius: 1rem;\n"]))),Wn=de.b.div(_t||(_t=Object(ce.a)(["\n  margin: 0;\n  margin-bottom: 1.5rem;\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n"]))),Yn=de.b.p(Lt||(Lt=Object(ce.a)(["\n  color: #064e3b;\n  margin-bottom: 0;\n  padding: 0;\n"]))),Zn=ae.a.object({content:ae.a.string().required()}),Qn=function(e){Object(A.a)(n,e);var t=Object(k.a)(n);function n(e){var r;return Object(S.a)(this,n),(r=t.call(this,e)).renderReviews=function(){return r.props.attraction.reviews.length<1?"":Object(we.jsxs)(Mn,{children:[Object(we.jsx)("h3",{className:"title",children:"Reviews"}),Object(we.jsx)("ul",{children:r.props.attraction.reviews.map((function(e){var t=e.content,n=e._id,a=e.stars,s=e.author;return Object(we.jsxs)(Bn,{children:[Object(we.jsxs)(Fn,{children:[Object(we.jsx)(zn,{}),Object(we.jsx)("p",{className:"name",children:s.username}),r.props.user.loggedIn&&r.props.user.id===s._id&&Object(we.jsx)(Gn,{onClick:function(){r.props.deleteAttrationReview({attractionId:r.props.attraction._id,reviewId:n})},children:"delete"})]}),Object(we.jsx)(Wn,{children:Object(we.jsx)(gn.a,{rating:a,starDimension:"16px",starSpacing:"5px",starRatedColor:"#065f46"})}),Object(we.jsx)("p",{className:"content",children:t})]},n)}))})]})},r.changeRating=function(e){r.setState({stars:e})},r.renderAddReview=function(){if(!r.props.user.loggedIn)return Object(we.jsxs)("div",{children:[Object(we.jsx)(Pn,{children:"Log in or register to leave a review"}),Object(we.jsx)(qn,{children:Object(we.jsx)(Le.a,{className:"link",to:"/login",children:"Login"})}),Object(we.jsx)(Vn,{children:Object(we.jsx)(Le.a,{className:"link",to:"/register",children:"Register"})})]});return Object(we.jsx)("div",{children:Object(we.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=r.props.attraction._id,n=Zn.validate({content:r.state.review}).error;n?r.setState({reviewError:n.details[0].message}):(r.props.addAttractionReview({attractionId:t,content:r.state.review,stars:r.state.stars}),r.setState({review:"",stars:0}),r.setState({reviewError:""}))},method:"post",children:[Object(we.jsxs)("div",{children:[Object(we.jsx)(Pn,{children:"How was your experience?"}),Object(we.jsx)(Dn,{children:Object(we.jsx)(gn.a,{rating:r.state.stars,starRatedColor:" #065f46",changeRating:r.changeRating,numberOfStars:5,name:"rating",starHoverColor:" #065f46",starDimension:"32px"})})]}),Object(we.jsx)(Rn,{className:"text-area",value:r.state.review,error:r.state.reviewError,onChange:function(e){r.setState({review:e.target.value})},name:"review",id:"review",cols:"30",rows:"10"}),Object(we.jsx)(ge,{children:r.state.reviewError}),Object(we.jsx)(Nn,{type:"submit",children:"Add Review"})]})})},r.renderDeleteButton=function(){return r.props.user&&r.props.user.id===r.props.attraction.addedBy?Object(we.jsx)(Un,{variant:"danger",onClick:function(){r.props.deleteAttraction(r.props.attraction._id)},children:"Delete"}):""},r.renderEditButton=function(){return r.props.user.loggedIn&&r.props.user.id===r.props.attraction.addedBy?Object(we.jsx)(Hn,{variant:"warning",children:Object(we.jsx)(Le.a,{className:"link",to:"/attractions/".concat(r.props.attraction._id,"/edit"),children:"Edit"})}):""},r.isOnList=function(){return!(!r.props.user.list||!r.props.user.list.some((function(e){return e._id===r.props.attraction._id})))},r.renderAddToListButton=function(e){return r.props.user.loggedIn?r.isOnList()?Object(we.jsxs)(xn,{onClick:function(){r.props.removeFromList(e)},children:[Object(we.jsx)(yn,{}),Object(we.jsx)("p",{className:"text",children:"Remove "})]}):Object(we.jsxs)(xn,{onClick:function(){r.props.addToList(e)},children:[Object(we.jsx)(yn,{}),Object(we.jsx)("p",{className:"text",children:"Add to List"})]}):Object(we.jsxs)(xn,{onClick:function(){r.props.addToList(e)},children:[Object(we.jsx)(yn,{}),Object(we.jsx)("p",{children:"Add to List"})]})},r.renderButtons=function(e){var t=r.props.attraction,n=t.visited,a=t.wantToVisit;return Object(we.jsxs)("div",{onClick:function(){r.props.user.loggedIn||C.push("/login")},children:[Object(we.jsxs)(xn,{onClick:function(){r.props.addToWantToVisit(e)},children:[Object(we.jsx)(wn,{}),Object(we.jsx)("p",{className:"text",children:"Want to Vist"}),Object(we.jsx)("p",{className:"number",children:a})]}),Object(we.jsxs)(xn,{onClick:function(){r.props.addToBeenThere(e)},children:[Object(we.jsx)(vn,{}),Object(we.jsx)("p",{className:"text",children:"Been There"}),Object(we.jsx)("p",{className:"number",children:n})]}),r.renderAddToListButton(e)]})},r.renderImages=function(e){return e.length>0?e.map((function(e,t){var n=e.url,r=e.public_id;return Object(we.jsx)(An,{src:n,alt:r},r)})):""},r.sideScroll=function(e,t,n,r){var a=0,s=setInterval((function(){e.scrollLeft+=r,(a+=Math.abs(r))>=n&&clearInterval(s)}),t)},r.renderAttraction=function(){if(r.props.attraction){var e=r.props.attraction,t=e.name,n=e.description,a=e.images,s=e.location,o=e._id,i=e.geocode,c=e.averageRating,d=e.reviews;return Object(we.jsxs)("div",{children:[Object(we.jsxs)(Oe,{children:[Object(we.jsxs)(fn,{children:[Object(we.jsxs)("div",{children:[Object(we.jsxs)(On,{children:[t," ",Object(we.jsx)("p",{className:"location",children:s}),r.props.flashMessage&&Object(we.jsx)(Kn,{children:r.props.flashMessage})]}),Object(we.jsxs)(Wn,{children:[Object(we.jsx)(gn.a,{rating:c,starDimension:"1.8rem",starSpacing:"2px",starRatedColor:"#065f46"}),Object(we.jsxs)(Yn,{children:[d.length," ","".concat(d.length>1||0===d.length?"ratings":"rating")]})]}),r.renderEditButton(o),r.renderDeleteButton()]}),Object(we.jsx)("div",{children:r.renderButtons(o)})]}),Object(we.jsxs)(Sn,{children:[r.state.scroll&&Object(we.jsx)(kn,{onClick:function(){r.sideScroll(r.imgsContainer.current,7,300,-10)}}),r.state.scroll&&Object(we.jsx)(Tn,{onClick:function(){r.sideScroll(r.imgsContainer.current,7,300,10)}}),Object(we.jsx)(En,{ref:r.imgsContainer,children:r.renderImages(a)})]})]}),Object(we.jsx)(Cn,{children:Object(we.jsxs)(In,{children:[Object(we.jsx)(_n,{children:n}),Object(we.jsx)(mn,{geocode:i}),Object(we.jsx)(Ln,{children:r.renderAddReview()}),Object(we.jsx)(Mn,{children:r.renderReviews()})]})})]})}return"LOADING..."},r.state={review:"",stars:0,reviewError:"",scroll:!1},r.imgsContainer=a.a.createRef(),r}return Object(E.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.getAttraction(this.props.match.params.id),this.props.user.loggedIn&&this.props.getUserAttractions(),setTimeout((function(){var t=e.imgsContainer.current;t&&t.scrollWidth>t.clientWidth?e.setState({scroll:!0}):e.setState({scroll:!1})}),500)}},{key:"render",value:function(){return this.props.user||C.push("/"),Object(we.jsx)("div",{children:this.renderAttraction()})}}]),n}(a.a.Component),$n=Object(i.b)((function(e,t){var n=e.attractions,r=e.user,a=e.flashMessage;return{attraction:n[t.match.params.id],user:r,flashMessage:a.data}}),{getAttraction:$,addAttractionReview:function(e){var t=e.attractionId,n=e.content,r=e.stars;return function(e){Object(R.a)(L.a.mark((function a(){var s,o;return L.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,z.post("/attractions/".concat(t,"/reviews"),{content:n,stars:r});case 2:s=a.sent,o=s.data,e({type:"GET_ATTRACTION",payload:o});case 5:case"end":return a.stop()}}),a)})))()}},deleteAttrationReview:function(e){var t=e.attractionId,n=e.reviewId;return function(e){Object(R.a)(L.a.mark((function r(){var a,s;return L.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,z.delete("/attractions/".concat(t,"/reviews/").concat(n));case 2:a=r.sent,s=a.data,e({type:"GET_ATTRACTION",payload:s});case 5:case"end":return r.stop()}}),r)})))()}},addToWantToVisit:function(e){return function(t){Object(R.a)(L.a.mark((function n(){var r,a;return L.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,z.post("/attractions/".concat(e,"/wanttovist"));case 2:r=n.sent,"ALREADY ADDED"!==(a=r.data)&&(t($(e)),t({type:"UPDATE_USER_LIST",payload:a}),t({type:"FLASH_MESSAGE",payload:"Attraction has been added to your list"}),setTimeout((function(){t({type:"FLASH_MESSAGE",payload:""})}),5e3));case 5:case"end":return n.stop()}}),n)})))()}},addToBeenThere:function(e){return function(t){Object(R.a)(L.a.mark((function n(){var r,a;return L.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,z.post("/attractions/".concat(e,"/beenthere"));case 2:r=n.sent,"ALREADY ADDED"!==(a=r.data)&&(t($(e)),t({type:"UPDATE_USER_LIST",payload:a}),t({type:"FLASH_MESSAGE",payload:"Attraction has been to your list"}),setTimeout((function(){t({type:"FLASH_MESSAGE",payload:""})}),5e3));case 5:case"end":return n.stop()}}),n)})))()}},addToList:function(e){return function(t){Object(R.a)(L.a.mark((function n(){var r,a;return L.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,z.post("/attractions/".concat(e,"/list"));case 2:r=n.sent,"WRONG REQUEST"!==(a=r.data)&&(t({type:"UPDATE_USER_LIST",payload:a}),t({type:"FLASH_MESSAGE",payload:"Attraction has been added to your list"}),setTimeout((function(){t({type:"FLASH_MESSAGE",payload:""})}),5e3));case 5:case"end":return n.stop()}}),n)})))()}},deleteAttraction:function(e){return function(t){Object(R.a)(L.a.mark((function n(){var r,a;return L.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,z.delete("/attractions/".concat(e));case 2:r=n.sent,a=r.data,t({type:"DELETE_ATTRACTION",payload:a}),t({type:"FLASH_MESSAGE",payload:"Attraction has been deleted"}),setTimeout((function(){t({type:"FLASH_MESSAGE",payload:""})}),5e3),C.push("/");case 8:case"end":return n.stop()}}),n)})))()}},getUserAttractions:X,removeFromList:function(e){return function(t){Object(R.a)(L.a.mark((function n(){var r,a;return L.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,z.delete("/attractions/".concat(e,"/list"));case 2:r=n.sent,"WRONG REQUEST"!==(a=r.data)&&(t({type:"UPDATE_USER_LIST",payload:a}),t({type:"FLASH_MESSAGE",payload:"Attraction has been removed to your list"}),setTimeout((function(){t({type:"FLASH_MESSAGE",payload:""})}),5e3));case 5:case"end":return n.stop()}}),n)})))()}}})(Qn),Jn=function(e){Object(A.a)(n,e);var t=Object(k.a)(n);function n(){var e;Object(S.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).renderAttractions=function(e){return e&&0!==e.length?Object(we.jsx)(tn,{children:e.map((function(e){var t=e.name,n=e.description,r=e._id,a=e.images;return Object(we.jsx)(nn,{children:Object(we.jsxs)(Le.a,{className:"link",to:"/attractions/".concat(r),children:[Object(we.jsx)(rn,{src:a[0].url,alt:"pic"}),Object(we.jsxs)(an,{children:[Object(we.jsx)("p",{className:"name",children:t}),Object(we.jsxs)("p",{className:"subtitle",children:[n.substring(0,101),"..."]})]})]})},r)}))}):Object(we.jsx)("p",{style:{fontSize:"25px"},children:"Nothing yet"})},e}return Object(E.a)(n,[{key:"componentDidMount",value:function(){this.props.getUserAttractions()}},{key:"render",value:function(){return this.props.user.loggedIn||C.push("/"),Object(we.jsxs)(Oe,{children:[Object(we.jsx)(cn,{children:"Places Where You Want To Go"}),this.renderAttractions(this.props.user.wantToVisit),Object(we.jsx)(cn,{children:"Places Where You've been"}),this.renderAttractions(this.props.user.beenThere),Object(we.jsx)(cn,{children:"Your List "}),this.renderAttractions(this.props.user.list)]})}}]),n}(a.a.Component),Xn=Object(i.b)((function(e){return{user:e.user}}),{getUserAttractions:X})(Jn),er=de.b.input(Rt||(Rt=Object(ce.a)(["\n  width: 50rem;\n  height: 6rem;\n  margin: 5rem auto;\n  padding: 1.2rem;\n  display: flex;\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);\n\n  border: none;\n  outline: none;\n  &:focus {\n    box-shadow: 0 0 0 1px #065f46;\n  }\n  &::placeholder {\n    font-weight: 400;\n    color: #065f46;\n  }\n\n  @media (max-width: 1024px) {\n    width: 40rem;\n  }\n  \n \n"]))),tr=de.b.h1(Nt||(Nt=Object(ce.a)(["\n  margin-top: 2.5rem;\n"]))),nr=function(e){Object(A.a)(n,e);var t=Object(k.a)(n);function n(){var e;Object(S.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={query:""},e.onQueryChange=function(t){e.setState({query:t.target.value}),f.a.debounce((function(){e.props.searchAttractions(e.state.query)}),300)()},e.renderAttractions=function(){return e.props.attractions?Object(we.jsx)(tn,{children:e.props.attractions.map((function(e){var t=e.name,n=e.description,r=e._id,a=e.images;return Object(we.jsx)(nn,{children:Object(we.jsxs)(Le.a,{className:"link",to:"/attractions/".concat(r),children:[Object(we.jsx)(rn,{src:a[0].url,alt:"pic"}),Object(we.jsxs)(an,{children:[Object(we.jsx)("p",{className:"name",children:t}),Object(we.jsxs)("p",{className:"subtitle",children:[n.substring(0,101),"..."]})]})]})},r)}))}):""},e}return Object(E.a)(n,[{key:"render",value:function(){return Object(we.jsxs)(Oe,{children:[Object(we.jsx)(dn,{children:Object(we.jsx)(tr,{children:"Search"})}),Object(we.jsx)(er,{onChange:this.onQueryChange,value:this.state.query,type:"text",placeholder:"Search for destinations"}),Object(we.jsx)("div",{children:this.renderAttractions()})]})}}]),n}(a.a.Component),rr=Object(i.b)((function(e){var t=e.attractionsSearchResults;return{attractions:f.a.values(t)}}),{searchAttractions:function(e){return function(t){Object(R.a)(L.a.mark((function n(){var r,a;return L.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,z.get("/attractions/search?q=".concat(e));case 2:r=n.sent,a=r.data,t({type:"ATTRACTIONS_SEARCH_RESULTS",payload:a});case 5:case"end":return n.stop()}}),n)})))()}}})(nr),ar=n(82),sr=function(e){Object(A.a)(n,e);var t=Object(k.a)(n);function n(e){var r;return Object(S.a)(this,n),(r=t.call(this,e)).componentDidMount=function(){r.props.getAttraction(r.props.match.params.id)},r.onTermChange=function(e){r.setState({term:e.target.value}),f.a.debounce((function(){r.props.getAdresses(r.state.term),console.log(r.props.addresses),0===r.props.addresses.length?r.setState({locationError:"It must be a valid UK address"}):r.setState({locationError:""})}),400)()},r.onNameChange=function(e){r.setState({name:e.target.value})},r.onDescriptionChange=function(e){r.setState({description:e.target.value})},r.onLocationChange=function(e){r.setState({location:e.target.value})},r.onImageChange=function(e){r.setState({images:e.target.files})},r.handleSubmit=function(e){e.preventDefault();var t=r.props.attraction._id,n=r.state.nameError,a=r.state.locationError,s=r.state.descriptionError;n||s||a||(r.state.deleteImages.length!==r.props.attraction.images.length||r.state.images?(r.props.editAttraction(Object(j.a)(Object(j.a)({},r.state),{},{_id:t})),r.setState({loading:!0})):r.setState({imagesError:"You must upload at least one image"}))},r.renderImages=function(e){return e?e.map((function(e){return Object(we.jsx)("img",{onClick:function(){var t=Object(ar.a)(r.state.deleteImages),n=t.indexOf(e.public_id);n<0?(t.push(e.public_id),r.setState({deleteImages:t})):(t.splice(n,1),r.setState({deleteImages:t}))},src:e.url,alt:e.public_id,style:{width:"150px",height:"auto",marginRight:"10px",marginBottom:"30px",opacity:"".concat(r.state.deleteImages.indexOf(e.public_id)<0?"":"0.3")}},e.public_id)})):""},r.renderAdressDropdown=function(){return Object(we.jsx)($t,{onClick:r.onLocationChange,children:r.props.addresses.map((function(e,t){var n=e.address;return Object(we.jsx)("option",{value:n,children:n},t)}))})},r.state={name:null,description:null,location:null,images:null,deleteImages:[],term:"",nameError:"",descriptionError:"",locationError:"",imagesError:"",loading:!1},r}return Object(E.a)(n,[{key:"render",value:function(){var e=this;return this.props.user.loggedIn||C.push("/"),this.props.attraction?Object(we.jsxs)("div",{children:[Object(we.jsx)(Zt,{children:Object(we.jsxs)(Yt,{children:["Edit Attraction",this.props.message&&Object(we.jsx)(Jt,{children:this.props.message})]})}),Object(we.jsx)(qt,{style:{width:"50%",marginBottom:"50px"},children:Object(we.jsxs)("form",{onSubmit:this.handleSubmit,encType:"multipart/form-data",children:[Object(we.jsxs)("div",{children:[Object(we.jsx)(Kt,{style:{marginBottom:"20px"},children:"Select To Delete Images:"}),Object(we.jsx)("div",{children:this.props.attraction&&this.renderImages(this.props.attraction.images)})]}),Object(we.jsxs)("div",{children:[Object(we.jsx)(Kt,{htmlFor:"name",children:"Name"}),Object(we.jsx)(Vt,{type:"text",name:"name",onChange:this.onNameChange,value:this.state.name,error:this.state.nameError,onBlur:function(t){var n=Ut.validate({name:t.target.value}).error;n?e.setState({nameError:n.details[0].message}):e.setState({nameError:""})}}),Object(we.jsx)(ge,{children:this.state.nameError})]}),Object(we.jsxs)("div",{children:[Object(we.jsx)(Kt,{htmlFor:"description",children:"Description"}),Object(we.jsx)(Qt,{name:"description",onChange:this.onDescriptionChange,value:this.state.description,error:this.state.descriptionError,onBlur:function(t){var n=Ht.validate({description:t.target.value}).error;n?e.setState({descriptionError:n.details[0].message}):e.setState({descriptionError:""})}}),Object(we.jsx)(ge,{children:this.state.descriptionError})]}),Object(we.jsxs)("div",{children:[Object(we.jsx)(Kt,{htmlFor:"location",children:"Address"}),Object(we.jsx)(Vt,{type:"text",name:"location",onChange:this.onTermChange,value:this.state.term,error:this.state.locationError,onBlur:function(t){var n=Pt.validate({location:t.target.value}).error;n?e.setState({locationError:n.details[0].message}):0!==e.props.addresses.length&&e.setState({locationError:""})}}),Object(we.jsx)(ge,{children:this.state.locationError})]}),this.props.addresses.length>0&&this.renderAdressDropdown(),Object(we.jsxs)("div",{children:[Object(we.jsx)(Kt,{htmlFor:"image",children:"Upload images"}),Object(we.jsx)(Vt,{style:{backgroundColor:"white"},onChange:this.onImageChange,type:"file",name:"images",multiple:!0}),Object(we.jsx)(ge,{children:this.state.imagesError})]}),Object(we.jsxs)(Wt,{type:"submit",children:[this.state.loading&&Object(we.jsx)(ve,{}),"Edit Attraction"]})]})})]}):"loading..."}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(null==t.name&&e.attraction){var n=e.attraction,r=n.name,a=n.description,s=n.location;return{name:r,description:a,location:s,term:s}}return null}}]),n}(a.a.Component),or=Object(i.b)((function(e,t){var n=e.attractions,r=e.user,a=e.addresses,s=e.flashMessage;return{attraction:n[t.match.params.id],user:r,addresses:a,message:s.data}}),{getAttraction:$,editAttraction:function(e){var t=e.name,n=e.location,r=e.description,a=e.images,s=e._id,o=e.deleteImages,i=new FormData;if(i.append("name",t),i.append("description",r),i.append("location",n),i.append("deleteImages",JSON.stringify(o)),a){var c,d=Object(I.a)(a);try{for(d.s();!(c=d.n()).done;){var l=c.value;i.append("images",l)}}catch(u){d.e(u)}finally{d.f()}}return function(e){Object(R.a)(L.a.mark((function t(){var n,r;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z.put("/attractions/".concat(s),i);case 2:n=t.sent,r=n.data,e({type:"CREAT_ATTRACTION",payload:r}),F(e,{type:"FLASH_MESSAGE",payload:"Attraction has been edited"}),C.push("/attractions/".concat(r._id));case 7:case"end":return t.stop()}}),t)})))()}},getAdresses:te})(sr),ir=n(54),cr=function(e){var t=e.attraction,n=Object(r.useState)(!1),a=Object(ir.a)(n,2),s=a[0],o=a[1],i=Object(r.useState)(0),c=Object(ir.a)(i,2),d=c[0],l=c[1];return Object(we.jsxs)("div",{style:{position:"absolute",transform:"translate(-50%, -40%) scale(0.8)",zIndex:d},onMouseOver:function(){o(!0),l(10)},onMouseLeave:function(){o(!1),l(0)},children:[s&&Object(we.jsx)(nn,{children:Object(we.jsxs)(Le.a,{className:"link",to:"/attractions/".concat(t._id),children:[Object(we.jsx)(rn,{src:t.images[0].url,alt:"pic"}),Object(we.jsxs)(an,{children:[Object(we.jsx)("p",{className:"name",children:t.name}),Object(we.jsxs)("p",{className:"subtitle",children:[t.description.substring(0,101),"..."]})]})]})},t._id),!s&&Object(we.jsx)("img",{style:{transform:"translate(0,-100%)"},alt:"marker",src:"/marker.png",height:"25px",width:"25px"})]})},dr=function(e){Object(A.a)(n,e);var t=Object(k.a)(n);function n(){var e;Object(S.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).renderMarkers=function(){return e.props.attractions.map((function(e){var t=e.geocode,n=e._id;return Object(we.jsx)(cr,{lat:t.lat,lng:t.lng,attraction:e},n)}))},e}return Object(E.a)(n,[{key:"componentDidMount",value:function(){this.props.getAllAttractions()}},{key:"render",value:function(){return Object(we.jsx)(Oe,{children:Object(we.jsx)("div",{style:{height:"90vh",width:"100%",marginTop:"20px",position:"relative"},children:Object(we.jsx)(bn.a,{bootstrapURLKeys:{key:"AIzaSyCkM2KZSzCVr9aS-Vuq_KhGDnLYR3vboEk"},defaultCenter:{lat:51.50809,lng:-.129137},defaultZoom:11,children:this.renderMarkers()})})})}}]),n}(r.Component),lr=Object(i.b)((function(e){var t=e.attractions;return{attractions:f.a.values(t)}}),{getAllAttractions:J})(dr),ur=Object(de.a)(Dt||(Dt=Object(ce.a)(["\n   * {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n  \n\n}\n\nhtml {\n  font-size: 63.5%;\n}\nbody {\n  font-family: 'Inter', Arial, Helvetica, sans-serif;\n  line-height: 1;\n  font-weight: 400;\n  color: #555;\n  font-size: 18px;\n  -webkit-user-select: none; /* Safari */\n  -webkit-touch-callout: none; /* iOS Safari */\n  -khtml-user-select: none; /* Konqueror HTML */\n  -ms-user-select: none; /* Internet Explorer/Edge */\n  -moz-user-select: none; /* Old versions of Firefox */\n  user-select: none;\n  background-color: #F9FAFB\n;\n}\n"]))),pr=function(e){Object(A.a)(n,e);var t=Object(k.a)(n);function n(){return Object(S.a)(this,n),t.apply(this,arguments)}return Object(E.a)(n,[{key:"componentDidMount",value:function(){this.props.isLoggedIn()}},{key:"render",value:function(){return Object(we.jsxs)(T.b,{history:C,children:[Object(we.jsx)(ur,{}),Object(we.jsx)(Bt,{}),Object(we.jsxs)(T.c,{children:[Object(we.jsx)(T.a,{exact:!0,path:"/",component:pn}),Object(we.jsx)(T.a,{exact:!0,path:"/register",component:Se}),Object(we.jsx)(T.a,{exact:!0,path:"/login",component:_e}),Object(we.jsx)(T.a,{exact:!0,path:"/create",component:en}),Object(we.jsx)(T.a,{exact:!0,path:"/attractions/search",component:rr}),Object(we.jsx)(T.a,{exact:!0,path:"/attractions/map",component:lr}),Object(we.jsx)(T.a,{exact:!0,path:"/attractions/:id/edit",component:or}),Object(we.jsx)(T.a,{exact:!0,path:"/attractions/:id",component:$n}),Object(we.jsx)(T.a,{exact:!0,path:"/myattractions",component:Xn}),Object(we.jsx)(T.a,{path:"*",component:function(){return Object(we.jsx)("h2",{children:"PAGE NOT FOUND"})}})]})]})}}]),n}(a.a.Component),br=Object(i.b)(null,{isLoggedIn:ee})(pr);n(144).config();var jr={key:"root",storage:u.a,whitelist:["user"]},mr=Object(d.a)(jr,y),hr=Object(c.c)(mr,Object(c.a)(b.a)),gr=Object(d.b)(hr);o.a.render(Object(we.jsx)(i.a,{store:hr,children:Object(we.jsx)(p.a,{loading:null,persistor:gr,children:Object(we.jsx)(br,{})})}),document.getElementById("root"))}},[[148,1,2]]]);
//# sourceMappingURL=main.5c291b70.chunk.js.map