(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{148:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),s=n(22),o=n.n(s),i=n(8),c=n(28),d=n(53),l=n(72),p=n.n(l),u=n(73),b=n(74),j=n(20);var h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loggedIn:!1},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"REGISTER":case"LOG_IN":return Object(j.a)(Object(j.a)({},r),{},{loggedIn:!0});case"LOG_OUT":return{loggedIn:!1};case"UPDATE_USER_LIST":return Object(j.a)(Object(j.a)({},e),r);case"ERROR":return{error:r};default:return e}},g=n(36),x=n(24),m=n.n(x);var f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"CREAT_ATTRACTION":return Object(j.a)(Object(j.a)({},e),{},Object(g.a)({},r._id,r));case"GET_ATTRACTIONS":return Object(j.a)(Object(j.a)({},e),m.a.mapKeys(r,"_id"));case"GET_ATTRACTION":return Object(j.a)(Object(j.a)({},e),{},Object(g.a)({},r._id,r));case"DELETE_ATTRACTION":return m.a.omit(e,r._id);default:return e}};var O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"ATTRACTIONS_SEARCH_RESULTS":return Object(j.a)({},m.a.mapKeys(r,"_id"));default:return e}};var v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{count:0},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"GET_ATTRACTION_COUNT":return{count:r};default:return e}};var y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"FLASH_MESSAGE":return{data:r};default:return e}},w=Object(c.b)({user:h,attractions:f,attractionsSearchResults:O,addresses:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"GET_ADDRESSES":return r;default:return e}},attractionsCount:v,flashMessage:y}),S=n(9),E=n(10),A=n(13),k=n(12),T=n(17),C=(n(95),n(25).createBrowserHistory()),I=n(49),_=n(5),L=n.n(_),R=n(16),N=n(50),D=n.n(N),z=D.a.create({baseURL:"/api",withCredentials:!0});function G(e,t){var n=t.type,r=t.payload;e({type:n,payload:r}),setTimeout((function(){e({type:n,payload:""})}),3e3)}var M,F,B,U,H,P,q,V,K,W,Y=function(){return function(e){Object(R.a)(L.a.mark((function t(){return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z.post("/logout");case 2:e({type:"LOG_OUT"}),G(e,{type:"FLASH_MESSAGE",payload:"You are logged out"});case 4:case"end":return t.stop()}}),t)})))()}},Z=function(e){return function(t){Object(R.a)(L.a.mark((function n(){var r,a;return L.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,z.get("/attractions/".concat(e));case 2:r=n.sent,a=r.data,t({type:"GET_ATTRACTION",payload:a});case 5:case"end":return n.stop()}}),n)})))()}},Q=function(){return function(e){Object(R.a)(L.a.mark((function t(){var n,r;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z.get("/attractions/all");case 2:n=t.sent,r=n.data,e({type:"GET_ATTRACTIONS",payload:r});case 5:case"end":return t.stop()}}),t)})))()}},$=function(){return function(e){Object(R.a)(L.a.mark((function t(){var n,r,a;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z.get("/user/beenthere");case 2:return n=t.sent,t.next=5,z.get("/user/wanttovist");case 5:return r=t.sent,t.next=8,z.get("/user/list");case 8:a=t.sent,e({type:"UPDATE_USER_LIST",payload:{beenThere:n.data,wantToVisit:r.data,list:a.data}});case 10:case"end":return t.stop()}}),t)})))()}},J=function(){return function(e){Object(R.a)(L.a.mark((function t(){var n;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z.get("/loggedin");case 2:n=t.sent,n.data.isLoggedIn||e({type:"LOG_OUT"});case 5:case"end":return t.stop()}}),t)})))()}},X=function(e){return function(t){Object(R.a)(L.a.mark((function n(){var r,a;return L.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,D.a.get("https://api.getaddress.io/autocomplete/".concat(e,"?expand=true&api-key=").concat("yWhQFstHyU-VFiGwfMxw5g32670"," "));case 2:r=n.sent,a=r.data,t({type:"GET_ADDRESSES",payload:a.suggestions});case 5:case"end":return n.stop()}}),n)})))()}},ee=function(e){return function(t){Object(R.a)(L.a.mark((function n(){var r,a;return L.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,z.post("/oauth",{token:e});case 2:r=n.sent,a=r.data,t({type:"LOG_IN",payload:a}),"POP"!==C.action?C.goBack():C.push("/");case 6:case"end":return n.stop()}}),n)})))()}},te=n(15),ne=n.n(te),re=ne.a.object({username:ne.a.string().pattern(new RegExp("^[A-Za-z0-9_-]*$")).message({"string.pattern.base":"Invalid username"}).min(5).max(30).required()}),ae=ne.a.object({email:ne.a.string().email({tlds:{allow:!1}}).required()}),se=ne.a.object({password:ne.a.string().pattern(new RegExp("^[A-Za-z0-9_@./#&+-]*$")).message({"string.pattern.base":"Invalid password"}).min(6).max(20).required()}),oe=n(2),ie=n(3),ce=ie.b.div(M||(M=Object(oe.a)(["\n  width: 400px;\n  margin: 0 auto;\n  display: flex;\n  justify-content: center;\n  /* background-color: #e9ecef; */\n  padding: 44px 55px;\n  /* border-radius: 10px; */\n  box-shadow: 0 2px 20px rgba(0, 0, 0, 0.15);\n"]))),de=ie.b.input(F||(F=Object(oe.a)(["\n  width: 100%;\n  height: 52px;\n  margin: 12px 0;\n  /* margin-bottom: 30px; */\n  font-family: inherit;\n  outline: none;\n  border: none;\n  padding: 10px;\n  font-size: 18px;\n  background-color: #f3f4f6;\n  border: ",";\n"])),(function(e){return e.error?"1px solid red":"none"})),le=ie.b.label(B||(B=Object(oe.a)(["\n  color: #212529;\n  font-size: 20px;\n"]))),pe=ie.b.button(U||(U=Object(oe.a)(["\n  width: 100%;\n  height: 52px;\n  color: white;\n  background-color: #065f46;\n  border: none;\n  font-size: 25px;\n  transition: all 300ms;\n  margin-top: 18px;\n  &:hover {\n    background-color: #064e3b;\n  }\n"]))),ue=ie.b.button(H||(H=Object(oe.a)(["\n  width: 100%;\n  height: 52px;\n  color: white;\n  margin-top: 20px;\n  background-color: #de5246;\n  border: none;\n  font-size: 25px;\n  transition: all 300ms;\n  &:hover {\n    background-color: #b91c1c;\n  }\n"]))),be=ie.b.h1(P||(P=Object(oe.a)(["\n  position: relative;\n  font-size: 42px;\n  color: #212529;\n  margin: 86px 0 60px 0;\n"]))),je=ie.b.div(q||(q=Object(oe.a)(["\n  text-align: center;\n"]))),he=ie.b.p(V||(V=Object(oe.a)(["\n  color: red;\n  font-size: 16px;\n  margin-bottom: 16px;\n"]))),ge=ie.b.p(K||(K=Object(oe.a)(["\n  position: absolute;\n  color: red;\n  font-size: 18px;\n  right:50%;\n  transform: translate(50% ,20px);\n"]))),xe=ie.b.div(W||(W=Object(oe.a)(["\n  width: 80%;\n  margin: 0 auto 70px auto;\n"]))),me=n(0),fe=function(e){Object(A.a)(n,e);var t=Object(k.a)(n);function n(){var e;Object(S.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={username:"",password:"",email:"",usernameError:"",passwordError:"",emailError:""},e.usernameChange=function(t){e.setState({username:t.target.value})},e.passwordChange=function(t){e.setState({password:t.target.value})},e.emailChange=function(t){e.setState({email:t.target.value})},e.handleSubmit=function(t){t.preventDefault();var n=re.validate({username:e.state.username}).error;n&&e.setState({usernameError:n.details[0].message});var r=se.validate({password:e.state.password}).error;r&&e.setState({passwordError:r.details[0].message});var a=ae.validate({email:e.state.email}).error;a&&e.setState({emailError:a.details[0].message}),n||r||a||e.props.register(e.state)},e}return Object(E.a)(n,[{key:"render",value:function(){var e=this;return this.props.user&&this.props.user.loggedIn&&C.push("/"),Object(me.jsxs)(xe,{children:[Object(me.jsx)(je,{children:Object(me.jsxs)(be,{children:["Register",this.props.user.error&&Object(me.jsx)(ge,{children:this.props.user.error})]})}),Object(me.jsx)(ce,{children:Object(me.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(me.jsxs)("div",{children:[Object(me.jsx)(le,{htmlFor:"username",children:"Email"}),Object(me.jsx)(de,{value:this.state.email,onChange:this.emailChange,name:"email",type:"text",error:this.state.emailError,onBlur:function(t){ae.validate({email:t.target.value}).error?e.setState({emailError:ae.validate({email:t.target.value}).error.details[0].message}):e.setState({emailError:""})}}),Object(me.jsx)(he,{children:this.state.emailError})]}),Object(me.jsxs)("div",{children:[Object(me.jsx)(le,{htmlFor:"username",children:"Username"}),Object(me.jsx)(de,{value:this.state.username,onChange:this.usernameChange,name:"username",type:"text",error:this.state.usernameError,onBlur:function(t){re.validate({username:t.target.value}).error?e.setState({usernameError:re.validate({username:t.target.value}).error.details[0].message}):e.setState({usernameError:""})}}),Object(me.jsx)(he,{children:this.state.usernameError})]}),Object(me.jsxs)("div",{children:[Object(me.jsx)(le,{htmlFor:"password",children:"Password"}),Object(me.jsx)(de,{value:this.state.password,onChange:this.passwordChange,name:"password",type:"password",error:this.state.passwordError,onBlur:function(t){se.validate({password:t.target.value}).error?(console.log(),e.setState({passwordError:se.validate({password:t.target.value}).error.details[0].message})):e.setState({passwordError:""})}}),Object(me.jsx)(he,{children:this.state.passwordError})]}),Object(me.jsx)(pe,{type:"submit",children:"Register"})]})})]})}}]),n}(a.a.Component),Oe=Object(i.b)((function(e){return{user:e.user}}),{register:function(e){return function(t){Object(R.a)(L.a.mark((function n(){var r,a;return L.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,z.post("/register",e);case 2:r=n.sent,(a=r.data).username?(t({type:"REGISTER",payload:a}),"POP"!==C.action?C.goBack():C.push("/")):G(t,{type:"ERROR",payload:a});case 5:case"end":return n.stop()}}),n)})))()}}})(fe),ve=ne.a.object({username:ne.a.string().pattern(new RegExp("^[A-Za-z0-9_-]*$")).message({"string.pattern.base":"Invalid username"}).min(5).max(30).required()}),ye=ne.a.object({password:ne.a.string().pattern(new RegExp("^[A-Za-z0-9_@./#&+-]*$")).message({"string.pattern.base":"Invalid password"}).max(20).required()}),we=n(40);var Se=Object(i.b)(null,{googleAuth:ee})((function(e){var t=e.googleAuth,n=e.text;return Object(me.jsx)("div",{children:Object(me.jsx)(we.GoogleLogin,{render:function(e){return Object(me.jsx)("span",{onClick:e.onClick,children:n})},clientId:"326110060194-telj65nuuhr9boqm2ru1fknvg0e73dvl.apps.googleusercontent.com",buttonText:"Login",onSuccess:function(e){t(e.tokenId)},onFailure:function(e){console.log("LOGGIN FAILED")},cookiePolicy:"single_host_origin",style:{marginTop:"100px"}})})})),Ee=n(30),Ae=function(e){Object(A.a)(n,e);var t=Object(k.a)(n);function n(){var e;Object(S.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={username:"",password:"",usernameError:"",passwordError:""},e.usernameChange=function(t){e.setState({username:t.target.value})},e.passwordChange=function(t){e.setState({password:t.target.value})},e.handleSubmit=function(t){t.preventDefault();var n=ve.validate({username:e.state.username}).error;n&&e.setState({usernameError:n.details[0].message});var r=ye.validate({password:e.state.password}).error;r&&e.setState({passwordError:r.details[0].message}),n||r||e.props.login(e.state)},e}return Object(E.a)(n,[{key:"render",value:function(){var e=this;return this.props.user&&this.props.user.loggedIn&&C.push("/"),Object(me.jsxs)(xe,{children:[Object(me.jsx)(je,{children:Object(me.jsxs)(be,{children:["Login",this.props.user.error&&Object(me.jsx)(ge,{children:this.props.user.error})]})}),Object(me.jsx)(ce,{children:Object(me.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(me.jsxs)("div",{children:[Object(me.jsx)(le,{htmlFor:"username",children:"Username"}),Object(me.jsx)(de,{error:this.state.usernameError,value:this.state.username,onChange:this.usernameChange,name:"username",type:"text",onBlur:function(t){ve.validate({username:t.target.value}).error?e.setState({usernameError:ve.validate({username:t.target.value}).error.details[0].message}):e.setState({usernameError:""})}}),Object(me.jsx)(he,{children:this.state.usernameError})]}),Object(me.jsxs)("div",{children:[Object(me.jsx)(le,{htmlFor:"password",children:"Password"}),Object(me.jsx)(de,{error:this.state.passwordError,value:this.state.password,onChange:this.passwordChange,name:"password",type:"password",onBlur:function(t){ye.validate({password:t.target.value}).error?(console.log(),e.setState({passwordError:ye.validate({password:t.target.value}).error.details[0].message})):e.setState({passwordError:""})}}),Object(me.jsx)(he,{children:this.state.passwordError})]}),Object(me.jsx)(pe,{type:"submit",children:"Login"}),Object(me.jsx)(je,{style:{marginTop:"15px"},children:"Or"}),Object(me.jsx)(Se,{text:Object(me.jsxs)(ue,{children:["Login with ",Object(me.jsx)(Ee.f,{})]})})]})})]})}}]),n}(a.a.Component),ke=Object(i.b)((function(e){return{user:e.user}}),{login:function(e){return function(t){Object(R.a)(L.a.mark((function n(){var r,a;return L.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,z.post("/login",e);case 2:r=n.sent,(a=r.data).username?(t({type:"LOG_IN",payload:a}),"POP"!==C.action?C.goBack():C.push("/")):G(t,{type:"ERROR",payload:a});case 5:case"end":return n.stop()}}),n)})))()}}})(Ae),Te=n(14),Ce=n(152),Ie=n(151),_e=n(153);var Le,Re,Ne,De,ze,Ge,Me,Fe,Be,Ue,He,Pe,qe,Ve,Ke,We,Ye,Ze,Qe,$e,Je,Xe,et,tt,nt,rt,at,st,ot,it,ct,dt,lt,pt,ut,bt,jt,ht,gt,xt,mt,ft,Ot,vt,yt,wt,St,Et,At,kt,Tt,Ct,It,_t,Lt,Rt=Object(i.b)(null,{logout:Y})((function(e){var t=e.logout;return Object(me.jsx)("div",{children:Object(me.jsx)(we.GoogleLogout,{render:function(e){return Object(me.jsx)("span",{onClick:e.onClick,children:"Logout"})},clientId:"326110060194-telj65nuuhr9boqm2ru1fknvg0e73dvl.apps.googleusercontent.com",buttonText:"Logout",onLogoutSuccess:function(){t()}})})})),Nt=ie.b.p(Le||(Le=Object(oe.a)(["\n  color: #065f46;\n  padding: 0;\n  margin: 0;\n  text-transform: uppercase;\n  font-weight: bold;\n  font-size: 20px;\n"]))),Dt=ie.b.p(Re||(Re=Object(oe.a)(["\n  color: #065f46;\n  padding: 0;\n  margin: 0;\n  text-transform: uppercase;\n  font-size: 20px;\n"]))),zt=function(e){Object(A.a)(n,e);var t=Object(k.a)(n);function n(){var e;Object(S.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).renderGoogleLogout=function(){return e.props.user.loggedIn&&e.props.user.oauth?Object(me.jsx)(Rt,{}):""},e}return Object(E.a)(n,[{key:"render",value:function(){var e=this;return Object(me.jsx)(Ce.a,{sticky:"top",bg:"light",expand:"lg",children:Object(me.jsxs)(Ie.a,{children:[Object(me.jsx)(Ce.a.Brand,{as:Te.a,to:"/",children:Object(me.jsx)(Nt,{children:"Arcane London"})}),Object(me.jsx)(Ce.a.Toggle,{color:"red","aria-controls":"basic-navbar-nav"}),Object(me.jsx)(Ce.a.Collapse,{id:"basic-navbar-nav",children:Object(me.jsxs)(_e.a,{className:"me-auto",children:[Object(me.jsx)(_e.a.Link,{as:Te.a,to:"/",children:Object(me.jsx)(Dt,{children:"Attractions"})}),Object(me.jsx)(_e.a.Link,{as:Te.a,to:"/attractions/map",children:Object(me.jsx)(Dt,{children:"Map"})}),this.props.user.loggedIn&&Object(me.jsx)(_e.a.Link,{as:Te.a,to:"/create",children:Object(me.jsx)(Dt,{children:"Add Attraction"})}),this.props.user.loggedIn&&Object(me.jsx)(_e.a.Link,{as:Te.a,to:"/myattractions",children:Object(me.jsx)(Dt,{children:"Lists"})}),Object(me.jsx)(_e.a.Link,{as:Te.a,to:"/attractions/search",children:Object(me.jsx)(Dt,{children:"Search"})}),!this.props.user.loggedIn&&Object(me.jsx)(_e.a.Link,{as:Te.a,to:"/register",children:Object(me.jsx)(Dt,{children:"Register"})}),this.props.user.loggedIn&&!this.props.user.oauth&&Object(me.jsx)(_e.a.Link,{onClick:function(){e.props.logout()},children:Object(me.jsx)(Dt,{children:"Logout"})}),!this.props.user.loggedIn&&Object(me.jsx)(_e.a.Link,{as:Te.a,to:"/login",children:Object(me.jsx)(Dt,{children:"Login"})}),this.props.user.loggedIn&&this.props.user.oauth&&Object(me.jsx)(_e.a.Link,{children:Object(me.jsx)(Dt,{children:Object(me.jsx)(Rt,{})})})]})})]})})}}]),n}(a.a.Component),Gt=Object(i.b)((function(e){return{user:e.user}}),{logout:Y,googleAuth:ee})(zt),Mt=ne.a.object({name:ne.a.string().min(3).max(50).required()}),Ft=ne.a.object({description:ne.a.string().min(20).required()}),Bt=ne.a.object({location:ne.a.string().required()}),Ut=ie.b.div(Ne||(Ne=Object(oe.a)(["\n  width: 600px;\n  margin: 0 auto;\n  margin-top: 48px;\n  display: flex;\n  justify-content: center;\n  /* background-color: #e9ecef; */\n  padding: 44px 55px;\n  /* border-radius: 10px; */\n  box-shadow: 0 2px 20px rgba(0, 0, 0, 0.15);\n"]))),Ht=ie.b.input(De||(De=Object(oe.a)(["\n  width: 100%;\n  height: 52px;\n  margin: 12px 0;\n  font-family: sans-serif;\n  outline: none;\n  border: none;\n  padding: 10px;\n  font-size: 18px;\n  background-color: #f3f4f6;\n  border: ",";\n"])),(function(e){return e.error?"1px solid red":"none"})),Pt=ie.b.label(ze||(ze=Object(oe.a)(["\n  color: #212529;\n  font-size: 24px;\n  font-weight: bold;\n"]))),qt=ie.b.button(Ge||(Ge=Object(oe.a)(["\n  width: 100%;\n  height: 52px;\n  color: white;\n  background-color: #065f46;\n  border: none;\n  font-size: 25px;\n  transition: all 300ms;\n  &:hover {\n    background-color: #064e3b;\n  }\n"]))),Vt=ie.b.h1(Me||(Me=Object(oe.a)(["\n  position: relative;\n  font-size: 42px;\n  color: #212529;\n  margin: 42px 0 92px 0;\n"]))),Kt=ie.b.div(Fe||(Fe=Object(oe.a)(["\n  text-align: center;\n"]))),Wt=ie.b.textarea(Be||(Be=Object(oe.a)(["\n  width: 100%;\n  height: 100px;\n  border: none;\n  outline: none;\n  margin: 12px 0;\n  padding: 12px;\n  line-height: 1.3;\n  background-color: #f3f4f6;\n  border: ",";\n"])),(function(e){return e.error?"1px solid red":"none"})),Yt=ie.b.select(Ue||(Ue=Object(oe.a)(["\n  width: 100%;\n  height: 52px;\n  border: none;\n  outline: none;\n  margin-bottom: 30px;\n  padding: 12px;\n  background-color: #f3f4f6;\n"]))),Zt=ie.b.p(He||(He=Object(oe.a)(["\n  position: absolute;\n  font-size: 25px;\n  color: #064e3b;\n  background-color: #d1fae5;\n  border-radius: 10px;\n  right: 50%;\n  transform: translate(50%, 20px);\n  padding: 12px;\n  border-radius: 10px;\n  margin-bottom: 30px;\n"]))),Qt=function(e){Object(A.a)(n,e);var t=Object(k.a)(n);function n(e){var r;return Object(S.a)(this,n),(r=t.call(this,e)).onNameChange=function(e){r.setState({name:e.target.value})},r.onDescriptionChange=function(e){r.setState({description:e.target.value})},r.onTermChange=function(e){r.setState({term:e.target.value}),m.a.debounce((function(){r.props.getAdresses(r.state.term),0===r.props.addresses.length?r.setState({locationError:"It must be a valid UK address"}):r.setState({locationError:""})}),500)()},r.onLocationChange=function(e){r.setState({location:e.target.value})},r.onImageChange=function(e){r.setState({images:e.target.files}),r.setState({imagesError:""})},r.handleSubmit=function(e){e.preventDefault();var t=Mt.validate({name:r.state.name}).error;t&&r.setState({nameError:t.details[0].message});var n=Ft.validate({description:r.state.description}).error;n&&r.setState({descriptionError:n.details[0].message});var a=r.props.addresses;a.length>0&&""===r.state.location&&r.setState({location:a[0].address});var s=Bt.validate({location:r.state.location||a[0].address}).error;s&&r.setState({locationError:s.details[0].message});var o=r.state.images?"":"You must upload at least one image";o&&r.setState({imagesError:o}),t||s||n||o||(r.props.createAttraction(r.state),r.setState({location:""}))},r.renderAdressDropdown=function(){var e=r.props.addresses;return Object(me.jsx)(Yt,{onClick:r.onLocationChange,children:e.map((function(e,t){var n=e.address;return Object(me.jsx)("option",{value:n,children:n},t)}))})},r.state={name:"",description:"",location:"",images:null,term:"",nameError:"",descriptionError:"",locationError:"",imagesError:""},r}return Object(E.a)(n,[{key:"renderForm",value:function(){var e=this;return this.props.user.loggedIn||C.push("/"),Object(me.jsxs)("div",{children:[Object(me.jsx)(Kt,{children:Object(me.jsxs)(Vt,{children:["Add Attraction",this.props.message&&Object(me.jsx)(Zt,{children:this.props.message})]})}),Object(me.jsx)(Ut,{children:Object(me.jsxs)("form",{autoComplete:"off",onSubmit:this.handleSubmit,encType:"multipart/form-data",children:[Object(me.jsxs)("div",{children:[Object(me.jsx)(Pt,{htmlFor:"name",children:"Name"}),Object(me.jsx)(Ht,{type:"text",name:"name",onChange:this.onNameChange,value:this.state.name,error:this.state.nameError,onBlur:function(t){var n=Mt.validate({name:t.target.value}).error;n?e.setState({nameError:n.details[0].message}):e.setState({nameError:""})}}),Object(me.jsx)(he,{children:this.state.nameError})]}),Object(me.jsxs)("div",{children:[Object(me.jsx)(Pt,{htmlFor:"description",children:"Description"}),Object(me.jsx)(Wt,{name:"description",onChange:this.onDescriptionChange,value:this.state.description,error:this.state.descriptionError,onBlur:function(t){var n=Ft.validate({description:t.target.value}).error;n?e.setState({descriptionError:n.details[0].message}):e.setState({descriptionError:""})}}),Object(me.jsx)(he,{children:this.state.descriptionError})]}),Object(me.jsxs)("div",{children:[Object(me.jsx)(Pt,{htmlFor:"location",children:"Address"}),Object(me.jsx)(Ht,{type:"text",name:"location",onChange:this.onTermChange,value:this.state.term,error:this.state.locationError,onBlur:function(t){var n=Bt.validate({location:t.target.value}).error;n?e.setState({locationError:n.details[0].message}):0!==e.props.addresses.length&&e.setState({locationError:""})}}),Object(me.jsx)(he,{children:this.state.locationError})]}),this.props.addresses.length>0&&this.renderAdressDropdown(),Object(me.jsxs)("div",{children:[Object(me.jsx)(Pt,{htmlFor:"image",children:"Upload images"}),Object(me.jsx)(Ht,{style:{backgroundColor:"white"},onChange:this.onImageChange,type:"file",name:"images",multiple:!0}),Object(me.jsx)(he,{children:this.state.imagesError})]}),Object(me.jsx)(qt,{type:"submit",children:"Add Attraction"})]})})]})}},{key:"render",value:function(){return Object(me.jsx)(xe,{children:this.renderForm()})}}]),n}(a.a.Component),$t=Object(i.b)((function(e){return{addresses:e.addresses,user:e.user,message:e.flashMessage.data}}),{createAttraction:function(e){var t=e.name,n=e.location,r=e.description,a=e.images,s=new FormData;s.append("name",t),s.append("description",r),s.append("location",n);var o,i=Object(I.a)(a);try{for(i.s();!(o=i.n()).done;){var c=o.value;s.append("images",c)}}catch(d){i.e(d)}finally{i.f()}return function(e){Object(R.a)(L.a.mark((function t(){var n,r;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return G(e,{type:"FLASH_MESSAGE",payload:"Attraction is being submitted"}),t.next=3,z.post("/attractions",s);case 3:n=t.sent,r=n.data,e({type:"CREAT_ATTRACTION",payload:r}),G(e,{type:"FLASH_MESSAGE",payload:"Attraction has been created"}),C.push("/attractions/".concat(r._id));case 8:case"end":return t.stop()}}),t)})))()}},getAdresses:X,isLoggedIn:J})(Qt),Jt=ie.b.div(Pe||(Pe=Object(oe.a)(["\n  display: grid;\n  grid-template-columns: repeat(4, 1fr);\n  row-gap: 50px;\n  margin-top: 64px;\n  width: 90%;\n  margin: 0 auto;\n  margin-top: 48px;\n"]))),Xt=ie.b.figure(qe||(qe=Object(oe.a)(["\n  width: 300px;\n  background-color: #fff;\n  box-shadow: 0 2px 20px rgba(0, 0, 0, 0.2);\n  /* border-radius: 5px; */\n  overflow: hidden;\n  cursor: pointer;\n  align-self: start;\n  transition: all 0.3s;\n  justify-content: space-between;\n  z-index: 10;\n  .link {\n    text-decoration: none;\n  }\n\n  &:hover {\n    transform: scale(1.05);\n  }\n"]))),en=ie.b.div(Ve||(Ve=Object(oe.a)(['\n  padding: 12px;\n  font-size: 16px;\n  align-self: start;\n\n  .name {\n    text-decoration: none;\n    color: #065f46;\n    margin-bottom: 12px;\n    font-size: 25px;\n    font-weight: 500;\n  }\n  .subtitle {\n    font-family: "Times New Roman", Times, serif;\n    text-transform: lowercase;\n    color: black;\n    font-size: 18px;\n    font-weight: 500;\n  }\n\n  .subtitle::first-letter {\n    text-transform: uppercase;\n  }\n']))),tn=ie.b.img(Ke||(Ke=Object(oe.a)(["\n  width: 300px;\n  height: 200px;\n  object-fit: cover;\n"]))),nn=ie.b.div(We||(We=Object(oe.a)(["\n  width: 300px;\n  margin: 24px auto;\n"]))),rn=ie.b.button(Ye||(Ye=Object(oe.a)(["\n  width: 100%;\n  /* height: 52px; */\n  color: white;\n  background-color: #065f46;\n  border: none;\n  /* border-radius: 10px; */\n  font-size: 25px;\n  transition: all 300ms;\n  padding: 12px 24px;\n  &:hover {\n    background-color: #064e3b;\n  }\n"]))),an=ie.b.h1(Ze||(Ze=Object(oe.a)(["\n  position: relative;\n  font-size: 42px;\n  color: #212529;\n  margin: 40px 0 100px 0;\n"]))),sn=ie.b.div(Qe||(Qe=Object(oe.a)(["\n  text-align: center;\n"]))),on=ie.b.p($e||($e=Object(oe.a)(["\n  position: absolute;\n  font-size: 18px;\n  color: #064e3b;\n  top: 0;\n  right: 50%;\n  background-color: #d1fae5;\n  padding: 12px;\n  border-radius: 10px;\n  transform: translate(50% ,65px);\n\n"]))),cn=function(e){Object(A.a)(n,e);var t=Object(k.a)(n);function n(){var e;Object(S.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={buttonVisibilty:""},e.renderAttractions=function(){return e.props.attractions?Object(me.jsx)(Jt,{children:e.props.attractions.map((function(e){var t=e.name,n=e.description,r=e._id,a=e.images;return Object(me.jsx)(Xt,{children:Object(me.jsxs)(Te.a,{className:"link",to:"/attractions/".concat(r),children:[Object(me.jsx)(tn,{src:a[0].url,alt:"pic"}),Object(me.jsxs)(en,{children:[Object(me.jsx)("p",{className:"name",children:t}),Object(me.jsxs)("p",{className:"subtitle",children:[n.substring(0,101),"..."]})]})]})},r)}))}):""},e.renderGetAllButton=function(){return!e.props.attractions||e.props.count<=8||e.props.attractions.length>8?"":Object(me.jsxs)(rn,{style:{visibility:e.state.buttonVisibilty},onClick:function(){e.props.getAllAttractions(),e.setState({buttonVisibilty:"hidden"})},children:["See All ",e.props.count," Attractions"]})},e}return Object(E.a)(n,[{key:"componentDidMount",value:function(){this.props.getAttractions(),this.props.getAttractionCount()}},{key:"render",value:function(){return Object(me.jsxs)(xe,{children:[Object(me.jsx)(sn,{children:Object(me.jsxs)(an,{children:["All the places in London",this.props.flashMessage&&Object(me.jsx)(on,{children:this.props.flashMessage})]})}),this.renderAttractions(),Object(me.jsx)("br",{}),Object(me.jsx)(nn,{children:this.renderGetAllButton()})]})}}]),n}(a.a.Component),dn=Object(i.b)((function(e){var t=e.attractions,n=e.attractionsCount,r=e.flashMessage;return{attractions:m.a.values(t),count:n.count,flashMessage:r.data}}),{getAttractions:function(){return function(e){Object(R.a)(L.a.mark((function t(){var n,r;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z.get("/attractions");case 2:n=t.sent,r=n.data,e({type:"GET_ATTRACTIONS",payload:r});case 5:case"end":return t.stop()}}),t)})))()}},getAllAttractions:Q,getAttractionCount:function(){return function(e){Object(R.a)(L.a.mark((function t(){var n,r;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z.get("/attractions/count");case 2:n=t.sent,r=n.data,e({type:"GET_ATTRACTION_COUNT",payload:r.count});case 5:case"end":return t.stop()}}),t)})))()}}})(cn),ln=n(42),pn=function(){return Object(me.jsx)("div",{children:Object(me.jsx)("img",{alt:"marker",src:"/marker.png",height:"25px",width:"25px"})})},un=function(e){Object(A.a)(n,e);var t=Object(k.a)(n);function n(){return Object(S.a)(this,n),t.apply(this,arguments)}return Object(E.a)(n,[{key:"render",value:function(){return this.props.geocode?Object(me.jsx)("div",{style:{height:"400px",width:"400px"},children:Object(me.jsx)(ln.a,{bootstrapURLKeys:{key:"AIzaSyCkM2KZSzCVr9aS-Vuq_KhGDnLYR3vboEk"},defaultCenter:this.props.geocode,defaultZoom:11,children:Object(me.jsx)(pn,{lat:this.props.geocode.lat,lng:this.props.geocode.lng})})}):""}}]),n}(r.Component),bn=n(44),jn=n.n(bn),hn=ie.b.div(Je||(Je=Object(oe.a)(["\n  display: grid;\n  grid-template-columns: 3fr 1fr;\n  row-gap: 48px;\n  margin-top: 32px;\n  margin-bottom: 48px;\n"]))),gn=ie.b.h1(Xe||(Xe=Object(oe.a)(["\n  font-size: 48px;\n  color: #065f46;\n  position: relative;\n  .location {\n    font-size: 30px;\n    margin: 10px 0;\n  }\n"]))),xn=ie.b.button(et||(et=Object(oe.a)(["\n  padding: 12px;\n  border: none;\n  background-color: white;\n  color: #065f46;\n  .number {\n    font-size: 24px;\n  }\n"]))),mn=Object(ie.b)(Ee.c)(tt||(tt=Object(oe.a)(["\n  color: #065f46;\n  font-size: 35px;\n  margin-bottom: 10px;\n"]))),fn=Object(ie.b)(Ee.g)(nt||(nt=Object(oe.a)(["\n  color: #065f46;\n  font-size: 35px;\n  margin-bottom: 10px;\n"]))),On=Object(ie.b)(Ee.e)(rt||(rt=Object(oe.a)(["\n  color: #065f46;\n  font-size: 35px;\n  margin-bottom: 10px;\n"]))),vn=ie.b.div(at||(at=Object(oe.a)(["\n  position: relative;\n"]))),yn=ie.b.div(st||(st=Object(oe.a)(["\n  display: flex;\n  overflow: hidden;\n  gap: 10px;\n  margin-bottom: 50px;\n  position: relative;\n"]))),wn=ie.b.img(ot||(ot=Object(oe.a)(["\n  height: 400px;\n  width: auto;\n"]))),Sn=Object(ie.b)(Ee.a)(it||(it=Object(oe.a)(["\n  position: absolute;\n  left: -70px;\n  top: 50%;\n  z-index: 10;\n  cursor: pointer;\n  font-size: 50px;\n  transform: translate(0, -50%);\n  color: #065f46;\n"]))),En=Object(ie.b)(Ee.b)(ct||(ct=Object(oe.a)(["\n  position: absolute;\n  right: -70px;\n  top: 50%;\n  z-index: 10;\n  font-size: 50px;\n  transform: translate(0, -50%);\n  cursor: pointer;\n\n  color: #065f46;\n"]))),An=ie.b.div(dt||(dt=Object(oe.a)(["\n  background-color: #ecfdf5;\n"]))),kn=ie.b.div(lt||(lt=Object(oe.a)(["\n  width: 80%;\n  display: grid;\n  grid-template-columns: 2.5fr 1fr;\n  /* grid-template-rows: 1fr 1fr; */\n  column-gap: 30px;\n  padding: 64px;\n  margin: 0 auto;\n"]))),Tn=ie.b.p(pt||(pt=Object(oe.a)(['\n  font-size: 20px;\n  font-family: "IBM Plex Serif";\n  line-height: 1.5;\n  color: #111827;\n  margin-bottom: 48px;\n  /* word-break: break-all; */\n']))),Cn=ie.b.div(ut||(ut=Object(oe.a)(["\n  justify-self: end;\n"]))),In=ie.b.div(bt||(bt=Object(oe.a)(["\n  width: 70%;\n  grid-column: 1 / -1;\n  margin-bottom: 48px;\n"]))),_n=ie.b.textarea(jt||(jt=Object(oe.a)(["\n  background-color: #f9fafb;\n  width: 100%;\n  display: block;\n  margin-bottom: 12px;\n  border: none;\n  padding: 12px;\n  outline: none;\n  border: ",";\n  &:focus {\n    box-shadow: 0 0 0 1px #065f46;\n  }\n"])),(function(e){return e.error?"1px solid red":"none"})),Ln=ie.b.button(ht||(ht=Object(oe.a)(["\n  width: 100%;\n  padding: 12px;\n  border: none;\n  background-color: #065f46;\n  color: #fff;\n  transition: all 0.3s;\n  &:hover {\n    background-color: #064e3b;\n  }\n"]))),Rn=ie.b.div(gt||(gt=Object(oe.a)(["\n  margin: 12px 0;\n"]))),Nn=Object(ie.b)(Ee.d)(xt||(xt=Object(oe.a)(["\n  color: #065f46;\n  font-size: 48px;\n"]))),Dn=ie.b.div(mt||(mt=Object(oe.a)(["\n  display: flex;\n  gap: 10px;\n  align-items: center;\n  .name {\n    font-weight: bold;\n    margin: 0;\n  }\n"]))),zn=ie.b.button(ft||(ft=Object(oe.a)(["\n  margin-left: 10px;\n  border: none;\n  background-color: #065f46;\n  padding: 8px 16px;\n  color: white;\n"]))),Gn=ie.b.div(Ot||(Ot=Object(oe.a)(["\n  .title {\n    font-size: 40px;\n    margin-bottom: 25px;\n  }\n"]))),Mn=ie.b.div(vt||(vt=Object(oe.a)(["\n  margin-bottom: 48px;\n  .content {\n    font-size: 20px;\n    line-height: 1.3;\n  }\n"]))),Fn=ie.b.button(yt||(yt=Object(oe.a)(["\n  background-color: #f87171;\n  border: none;\n  padding: 8px 16px;\n  color: black;\n"]))),Bn=ie.b.button(wt||(wt=Object(oe.a)(["\n  background-color: #fde68a;\n  border: none;\n  padding: 8px 16px;\n  margin-right: 20px;\n  .link {\n    text-decoration: none;\n    color: black;\n  }\n"]))),Un=ie.b.p(St||(St=Object(oe.a)(["\n  font-size: 25px;\n  font-weight: bold;\n"]))),Hn=ie.b.button(Et||(Et=Object(oe.a)(["\n  padding: 12px;\n  border: none;\n  background-color: #065f46;\n  transition: all 0.3s;\n  margin-right: 30px;\n  margin-left: 10px;\n  .link {\n    color: #fff;\n    text-decoration: none;\n  }\n\n  &:hover {\n    background-color: #064e3b;\n  }\n"]))),Pn=ie.b.button(At||(At=Object(oe.a)(["\n  padding: 12px;\n  border: none;\n  background-color: #d1fae5;\n  transition: all 0.3s;\n\n  .link {\n    color: #064e3b;\n    text-decoration: none;\n  }\n\n  &:hover {\n    background-color: #a7f3d0;\n  }\n"]))),qn=ie.b.p(kt||(kt=Object(oe.a)(["\n  position: absolute;\n  font-size: 25px;\n  color: #064e3b;\n  top: 10%;\n  left: 50%;\n  background-color: #d1fae5;\n  padding: 12px;\n  border-radius: 10px;\n"]))),Vn=ie.b.div(Tt||(Tt=Object(oe.a)(["\n  margin: 0px 0 15px 0;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n"]))),Kn=ie.b.p(Ct||(Ct=Object(oe.a)(["\n  color: #064e3b;\n  margin-bottom: 0;\n  padding: 0;\n"]))),Wn=ne.a.object({content:ne.a.string().required()}),Yn=function(e){Object(A.a)(n,e);var t=Object(k.a)(n);function n(e){var r;return Object(S.a)(this,n),(r=t.call(this,e)).renderReviews=function(){return r.props.attraction.reviews.length<1?"":Object(me.jsxs)(Gn,{children:[Object(me.jsx)("h3",{className:"title",children:"Reviews"}),Object(me.jsx)("ul",{children:r.props.attraction.reviews.map((function(e){var t=e.content,n=e._id,a=e.stars,s=e.author;return Object(me.jsxs)(Mn,{children:[Object(me.jsxs)(Dn,{children:[Object(me.jsx)(Nn,{}),Object(me.jsx)("p",{className:"name",children:s.username}),r.props.user.loggedIn&&r.props.user.id===s._id&&Object(me.jsx)(zn,{onClick:function(){r.props.deleteAttrationReview({attractionId:r.props.attraction._id,reviewId:n})},children:"delete"})]}),Object(me.jsx)(Vn,{children:Object(me.jsx)(jn.a,{rating:a,starDimension:"16px",starSpacing:"5px",starRatedColor:"#065f46"})}),Object(me.jsx)("p",{className:"content",children:t})]},n)}))})]})},r.changeRating=function(e){r.setState({stars:e})},r.renderAddReview=function(){if(!r.props.user.loggedIn)return Object(me.jsxs)("div",{children:[Object(me.jsx)(Un,{children:"Log in or register to leave a review"}),Object(me.jsx)(Hn,{children:Object(me.jsx)(Te.a,{className:"link",to:"/login",children:"Login"})}),Object(me.jsx)(Pn,{children:Object(me.jsx)(Te.a,{className:"link",to:"/register",children:"Register"})})]});return Object(me.jsx)("div",{children:Object(me.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=r.props.attraction._id,n=Wn.validate({content:r.state.review}).error;n?r.setState({reviewError:n.details[0].message}):(r.props.addAttractionReview({attractionId:t,content:r.state.review,stars:r.state.stars}),r.setState({review:"",stars:0}),r.setState({reviewError:""}))},method:"post",children:[Object(me.jsxs)("div",{children:[Object(me.jsx)(Un,{children:"How was your experience?"}),Object(me.jsx)(Rn,{children:Object(me.jsx)(jn.a,{rating:r.state.stars,starRatedColor:" #065f46",changeRating:r.changeRating,numberOfStars:5,name:"rating",starHoverColor:" #065f46",starDimension:"32px"})})]}),Object(me.jsx)(_n,{className:"text-area",value:r.state.review,error:r.state.reviewError,onChange:function(e){r.setState({review:e.target.value})},name:"review",id:"review",cols:"30",rows:"10"}),Object(me.jsx)(he,{children:r.state.reviewError}),Object(me.jsx)(Ln,{type:"submit",children:"Add Review"})]})})},r.renderDeleteButton=function(){return r.props.user&&r.props.user.id===r.props.attraction.addedBy?Object(me.jsx)(Fn,{variant:"danger",onClick:function(){r.props.deleteAttraction(r.props.attraction._id)},children:"Delete"}):""},r.renderEditButton=function(){return r.props.user.loggedIn&&r.props.user.id===r.props.attraction.addedBy?Object(me.jsx)(Bn,{variant:"warning",children:Object(me.jsx)(Te.a,{className:"link",to:"/attractions/".concat(r.props.attraction._id,"/edit"),children:"Edit"})}):""},r.isOnList=function(){return!(!r.props.user.list||!r.props.user.list.some((function(e){return e._id===r.props.attraction._id})))},r.renderAddToListButton=function(e){return r.props.user.loggedIn&&r.isOnList()?Object(me.jsxs)(xn,{onClick:function(){r.props.removeFromList(e)},children:[Object(me.jsx)(On,{}),Object(me.jsx)("p",{children:"Remove "})]}):Object(me.jsxs)(xn,{onClick:function(){r.props.addToList(e)},children:[Object(me.jsx)(On,{}),Object(me.jsx)("p",{children:"Add to List"})]})},r.renderButtons=function(e){var t=r.props.attraction,n=t.visited,a=t.wantToVisit;return Object(me.jsxs)("div",{onClick:function(){r.props.user.loggedIn||C.push("/login")},children:[Object(me.jsxs)(xn,{onClick:function(){r.props.addToWantToVisit(e)},children:[Object(me.jsx)(fn,{}),Object(me.jsx)("p",{children:"Want to Vist"}),Object(me.jsx)("p",{className:"number",children:a})]}),Object(me.jsxs)(xn,{onClick:function(){r.props.addToBeenThere(e)},children:[Object(me.jsx)(mn,{}),Object(me.jsx)("p",{children:"Been There"}),Object(me.jsx)("p",{className:"number",children:n})]}),r.renderAddToListButton(e)]})},r.renderImages=function(e){return e.length>0?e.map((function(e,t){var n=e.url,r=e.public_id;return Object(me.jsx)(wn,{src:n,alt:r},r)})):""},r.sideScroll=function(e,t,n,r){var a=0,s=setInterval((function(){e.scrollLeft+=r,(a+=Math.abs(r))>=n&&clearInterval(s)}),t)},r.renderScroll=function(e){return!(!e||e.clientWidth>=e.scrollWidth)},r.renderAttraction=function(){if(r.props.attraction){var e=r.props.attraction,t=e.name,n=e.description,a=e.images,s=e.location,o=e._id,i=e.geocode,c=e.averageRating,d=e.reviews;return Object(me.jsxs)("div",{children:[Object(me.jsxs)(xe,{children:[Object(me.jsxs)(hn,{children:[Object(me.jsxs)("div",{children:[Object(me.jsxs)(gn,{children:[t," ",Object(me.jsx)("p",{className:"location",children:s}),r.props.flashMessage&&Object(me.jsx)(qn,{children:r.props.flashMessage})]}),Object(me.jsxs)(Vn,{children:[Object(me.jsx)(jn.a,{rating:c,starDimension:"20px",starSpacing:"5px",starRatedColor:"#065f46"}),Object(me.jsxs)(Kn,{children:[d.length," ","".concat(d.length>1||0===d.length?"ratings":"rating")]})]}),r.renderEditButton(o),r.renderDeleteButton()]}),Object(me.jsx)("div",{children:r.renderButtons(o)})]}),Object(me.jsxs)(vn,{children:[r.renderScroll(r.imgsContainer.current)&&Object(me.jsx)(Sn,{onClick:function(){r.sideScroll(r.imgsContainer.current,7,300,-10)}}),r.renderScroll(r.imgsContainer.current)&&Object(me.jsx)(En,{onClick:function(){r.sideScroll(r.imgsContainer.current,7,300,10)}}),Object(me.jsx)(yn,{ref:r.imgsContainer,children:r.renderImages(a)})]})]}),Object(me.jsx)(An,{children:Object(me.jsxs)(kn,{children:[Object(me.jsx)("div",{children:Object(me.jsx)(Tn,{children:n})}),Object(me.jsx)(Cn,{children:Object(me.jsx)(un,{geocode:i})}),Object(me.jsx)(In,{children:r.renderAddReview()}),Object(me.jsx)(Gn,{children:r.renderReviews()})]})})]})}return"LOADING..."},r.state={review:"",stars:0,reviewError:""},r.imgsContainer=a.a.createRef(),r}return Object(E.a)(n,[{key:"componentDidMount",value:function(){this.props.getAttraction(this.props.match.params.id),this.props.user.loggedIn&&this.props.getUserAttractions()}},{key:"render",value:function(){return Object(me.jsx)("div",{children:this.renderAttraction()})}}]),n}(a.a.Component),Zn=Object(i.b)((function(e,t){var n=e.attractions,r=e.user,a=e.flashMessage;return{attraction:n[t.match.params.id],user:r,flashMessage:a.data}}),{getAttraction:Z,addAttractionReview:function(e){var t=e.attractionId,n=e.content,r=e.stars;return function(e){Object(R.a)(L.a.mark((function a(){var s,o;return L.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,z.post("/attractions/".concat(t,"/reviews"),{content:n,stars:r});case 2:s=a.sent,o=s.data,e({type:"GET_ATTRACTION",payload:o});case 5:case"end":return a.stop()}}),a)})))()}},deleteAttrationReview:function(e){var t=e.attractionId,n=e.reviewId;return function(e){Object(R.a)(L.a.mark((function r(){var a,s;return L.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,z.delete("/attractions/".concat(t,"/reviews/").concat(n));case 2:a=r.sent,s=a.data,e({type:"GET_ATTRACTION",payload:s});case 5:case"end":return r.stop()}}),r)})))()}},addToWantToVisit:function(e){return function(t){Object(R.a)(L.a.mark((function n(){var r,a;return L.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,z.post("/attractions/".concat(e,"/wanttovist"));case 2:r=n.sent,"ALREADY ADDED"!==(a=r.data)&&(t(Z(e)),t({type:"UPDATE_USER_LIST",payload:a}),t({type:"FLASH_MESSAGE",payload:"Attraction has been added to your list"}),setTimeout((function(){t({type:"FLASH_MESSAGE",payload:""})}),5e3));case 5:case"end":return n.stop()}}),n)})))()}},addToBeenThere:function(e){return function(t){Object(R.a)(L.a.mark((function n(){var r,a;return L.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,z.post("/attractions/".concat(e,"/beenthere"));case 2:r=n.sent,"ALREADY ADDED"!==(a=r.data)&&(t(Z(e)),t({type:"UPDATE_USER_LIST",payload:a}),t({type:"FLASH_MESSAGE",payload:"Attraction has been to your list"}),setTimeout((function(){t({type:"FLASH_MESSAGE",payload:""})}),5e3));case 5:case"end":return n.stop()}}),n)})))()}},addToList:function(e){return function(t){Object(R.a)(L.a.mark((function n(){var r,a;return L.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,z.post("/attractions/".concat(e,"/list"));case 2:r=n.sent,"WRONG REQUEST"!==(a=r.data)&&(t({type:"UPDATE_USER_LIST",payload:a}),t({type:"FLASH_MESSAGE",payload:"Attraction has been added to your list"}),setTimeout((function(){t({type:"FLASH_MESSAGE",payload:""})}),5e3));case 5:case"end":return n.stop()}}),n)})))()}},deleteAttraction:function(e){return function(t){Object(R.a)(L.a.mark((function n(){var r,a;return L.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,z.delete("/attractions/".concat(e));case 2:r=n.sent,a=r.data,t({type:"DELETE_ATTRACTION",payload:a}),t({type:"FLASH_MESSAGE",payload:"Attraction has been deleted"}),setTimeout((function(){t({type:"FLASH_MESSAGE",payload:""})}),5e3),C.push("/");case 8:case"end":return n.stop()}}),n)})))()}},getUserAttractions:$,removeFromList:function(e){return function(t){Object(R.a)(L.a.mark((function n(){var r,a;return L.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,z.delete("/attractions/".concat(e,"/list"));case 2:r=n.sent,"WRONG REQUEST"!==(a=r.data)&&(t({type:"UPDATE_USER_LIST",payload:a}),t({type:"FLASH_MESSAGE",payload:"Attraction has been removed to your list"}),setTimeout((function(){t({type:"FLASH_MESSAGE",payload:""})}),5e3));case 5:case"end":return n.stop()}}),n)})))()}}})(Yn),Qn=function(e){Object(A.a)(n,e);var t=Object(k.a)(n);function n(){var e;Object(S.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).renderAttractions=function(e){return e&&0!==e.length?Object(me.jsx)(Jt,{children:e.map((function(e){var t=e.name,n=e.description,r=e._id,a=e.images;return Object(me.jsx)(Xt,{children:Object(me.jsxs)(Te.a,{className:"link",to:"/attractions/".concat(r),children:[Object(me.jsx)(tn,{src:a[0].url,alt:"pic"}),Object(me.jsxs)(en,{children:[Object(me.jsx)("p",{className:"name",children:t}),Object(me.jsxs)("p",{className:"subtitle",children:[n.substring(0,101),"..."]})]})]})},r)}))}):Object(me.jsx)("p",{style:{fontSize:"25px"},children:"Nothing yet"})},e}return Object(E.a)(n,[{key:"componentDidMount",value:function(){this.props.getUserAttractions()}},{key:"render",value:function(){return this.props.user.loggedIn||C.push("/"),Object(me.jsxs)(xe,{children:[Object(me.jsx)(an,{children:"Places Where You Want To Go"}),this.renderAttractions(this.props.user.wantToVisit),Object(me.jsx)(an,{children:"Places Where You've been"}),this.renderAttractions(this.props.user.beenThere),Object(me.jsx)(an,{children:"Your List "}),this.renderAttractions(this.props.user.list)]})}}]),n}(a.a.Component),$n=Object(i.b)((function(e){return{user:e.user}}),{getUserAttractions:$})(Qn),Jn=ie.b.input(It||(It=Object(oe.a)(["\n  width: 500px;\n  height: 60px;\n  margin: 50px auto;\n  padding: 12px;\n  display: flex;\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);\n\n  border: none;\n  outline: none;\n  &:focus {\n    box-shadow: 0 0 0 1px #065f46;\n  }\n  &::placeholder {\n    font-weight: 400;\n    color: #065f46;\n  }\n"]))),Xn=ie.b.h1(_t||(_t=Object(oe.a)(["\n  margin-top: 25px;\n"]))),er=function(e){Object(A.a)(n,e);var t=Object(k.a)(n);function n(){var e;Object(S.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={query:""},e.onQueryChange=function(t){e.setState({query:t.target.value}),m.a.debounce((function(){e.props.searchAttractions(e.state.query)}),300)()},e.renderAttractions=function(){return e.props.attractions?Object(me.jsx)(Jt,{children:e.props.attractions.map((function(e){var t=e.name,n=e.description,r=e._id,a=e.images;return Object(me.jsx)(Xt,{children:Object(me.jsxs)(Te.a,{className:"link",to:"/attractions/".concat(r),children:[Object(me.jsx)(tn,{src:a[0].url,alt:"pic"}),Object(me.jsxs)(en,{children:[Object(me.jsx)("p",{className:"name",children:t}),Object(me.jsxs)("p",{className:"subtitle",children:[n.substring(0,101),"..."]})]})]})},r)}))}):""},e}return Object(E.a)(n,[{key:"render",value:function(){return Object(me.jsxs)(xe,{children:[Object(me.jsx)(sn,{children:Object(me.jsx)(Xn,{children:"Search"})}),Object(me.jsx)(Jn,{onChange:this.onQueryChange,value:this.state.query,type:"text",placeholder:"Search for destinations"}),Object(me.jsx)("div",{children:this.renderAttractions()})]})}}]),n}(a.a.Component),tr=Object(i.b)((function(e){var t=e.attractionsSearchResults;return{attractions:m.a.values(t)}}),{searchAttractions:function(e){return function(t){Object(R.a)(L.a.mark((function n(){var r,a;return L.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,z.get("/attractions/search?q=".concat(e));case 2:r=n.sent,a=r.data,t({type:"ATTRACTIONS_SEARCH_RESULTS",payload:a});case 5:case"end":return n.stop()}}),n)})))()}}})(er),nr=n(82),rr=function(e){Object(A.a)(n,e);var t=Object(k.a)(n);function n(e){var r;return Object(S.a)(this,n),(r=t.call(this,e)).componentDidMount=function(){r.props.getAttraction(r.props.match.params.id)},r.onTermChange=function(e){r.setState({term:e.target.value}),m.a.debounce((function(){r.props.getAdresses(r.state.term),console.log(r.props.addresses),0===r.props.addresses.length?r.setState({locationError:"It must be a valid UK address"}):r.setState({locationError:""})}),400)()},r.onNameChange=function(e){r.setState({name:e.target.value})},r.onDescriptionChange=function(e){r.setState({description:e.target.value})},r.onLocationChange=function(e){r.setState({location:e.target.value})},r.onImageChange=function(e){r.setState({images:e.target.files})},r.handleSubmit=function(e){e.preventDefault();var t=r.props.attraction._id,n=r.state.nameError,a=r.state.locationError,s=r.state.descriptionError;n||s||a||(r.state.deleteImages.length!==r.props.attraction.images.length||r.state.images?r.props.editAttraction(Object(j.a)(Object(j.a)({},r.state),{},{_id:t})):r.setState({imagesError:"You must upload at least one image"}))},r.renderImages=function(e){return e?e.map((function(e){return Object(me.jsx)("img",{onClick:function(){var t=Object(nr.a)(r.state.deleteImages),n=t.indexOf(e.public_id);n<0?(t.push(e.public_id),r.setState({deleteImages:t})):(t.splice(n,1),r.setState({deleteImages:t}))},src:e.url,alt:e.public_id,style:{width:"150px",height:"auto",marginRight:"10px",marginBottom:"30px",opacity:"".concat(r.state.deleteImages.indexOf(e.public_id)<0?"":"0.3")}},e.public_id)})):""},r.renderAdressDropdown=function(){return Object(me.jsx)(Yt,{onClick:r.onLocationChange,children:r.props.addresses.map((function(e,t){var n=e.address;return Object(me.jsx)("option",{value:n,children:n},t)}))})},r.state={name:null,description:null,location:null,images:null,deleteImages:[],term:"",nameError:"",descriptionError:"",locationError:"",imagesError:""},r}return Object(E.a)(n,[{key:"render",value:function(){var e=this;return this.props.user.loggedIn||C.push("/"),this.props.attraction?Object(me.jsxs)("div",{children:[Object(me.jsx)(Kt,{children:Object(me.jsxs)(Vt,{children:["Edit Attraction",this.props.message&&Object(me.jsx)(Zt,{children:this.props.message})]})}),Object(me.jsx)(Ut,{style:{width:"50%",marginBottom:"50px"},children:Object(me.jsxs)("form",{onSubmit:this.handleSubmit,encType:"multipart/form-data",children:[Object(me.jsxs)("div",{children:[Object(me.jsx)(Pt,{style:{marginBottom:"20px"},children:"Select To Delete Images:"}),Object(me.jsx)("div",{children:this.props.attraction&&this.renderImages(this.props.attraction.images)})]}),Object(me.jsxs)("div",{children:[Object(me.jsx)(Pt,{htmlFor:"name",children:"Name"}),Object(me.jsx)(Ht,{type:"text",name:"name",onChange:this.onNameChange,value:this.state.name,error:this.state.nameError,onBlur:function(t){var n=Mt.validate({name:t.target.value}).error;n?e.setState({nameError:n.details[0].message}):e.setState({nameError:""})}}),Object(me.jsx)(he,{children:this.state.nameError})]}),Object(me.jsxs)("div",{children:[Object(me.jsx)(Pt,{htmlFor:"description",children:"Description"}),Object(me.jsx)(Wt,{name:"description",onChange:this.onDescriptionChange,value:this.state.description,error:this.state.descriptionError,onBlur:function(t){var n=Ft.validate({description:t.target.value}).error;n?e.setState({descriptionError:n.details[0].message}):e.setState({descriptionError:""})}}),Object(me.jsx)(he,{children:this.state.descriptionError})]}),Object(me.jsxs)("div",{children:[Object(me.jsx)(Pt,{htmlFor:"location",children:"Address"}),Object(me.jsx)(Ht,{type:"text",name:"location",onChange:this.onTermChange,value:this.state.term,error:this.state.locationError,onBlur:function(t){var n=Bt.validate({location:t.target.value}).error;n?e.setState({locationError:n.details[0].message}):0!==e.props.addresses.length&&e.setState({locationError:""})}}),Object(me.jsx)(he,{children:this.state.locationError})]}),this.props.addresses.length>0&&this.renderAdressDropdown(),Object(me.jsxs)("div",{children:[Object(me.jsx)(Pt,{htmlFor:"image",children:"Upload images"}),Object(me.jsx)(Ht,{style:{backgroundColor:"white"},onChange:this.onImageChange,type:"file",name:"images",multiple:!0}),Object(me.jsx)(he,{children:this.state.imagesError})]}),Object(me.jsx)(qt,{type:"submit",children:"Edit Attraction"})]})})]}):"loading..."}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(null==t.name&&e.attraction){var n=e.attraction,r=n.name,a=n.description,s=n.location;return{name:r,description:a,location:s,term:s}}return null}}]),n}(a.a.Component),ar=Object(i.b)((function(e,t){var n=e.attractions,r=e.user,a=e.addresses,s=e.flashMessage;return{attraction:n[t.match.params.id],user:r,addresses:a,message:s.data}}),{getAttraction:Z,editAttraction:function(e){var t=e.name,n=e.location,r=e.description,a=e.images,s=e._id,o=e.deleteImages,i=new FormData;if(i.append("name",t),i.append("description",r),i.append("location",n),i.append("deleteImages",JSON.stringify(o)),a){var c,d=Object(I.a)(a);try{for(d.s();!(c=d.n()).done;){var l=c.value;i.append("images",l)}}catch(p){d.e(p)}finally{d.f()}}return function(e){Object(R.a)(L.a.mark((function t(){var n,r;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return G(e,{type:"FLASH_MESSAGE",payload:"The changes are being submitted"}),t.next=3,z.put("/attractions/".concat(s),i);case 3:n=t.sent,r=n.data,e({type:"CREAT_ATTRACTION",payload:r}),G(e,{type:"FLASH_MESSAGE",payload:"Attraction has been edited"}),C.push("/attractions/".concat(r._id));case 8:case"end":return t.stop()}}),t)})))()}},getAdresses:X})(rr),sr=n(54),or=function(e){var t=e.attraction,n=Object(r.useState)(!1),a=Object(sr.a)(n,2),s=a[0],o=a[1],i=Object(r.useState)(0),c=Object(sr.a)(i,2),d=c[0],l=c[1];return Object(me.jsxs)("div",{style:{position:"absolute",transform:"translate(-50%, -40%) scale(0.8)",zIndex:d},onMouseOver:function(){o(!0),l(10)},onMouseLeave:function(){o(!1),l(0)},children:[s&&Object(me.jsx)(Xt,{children:Object(me.jsxs)(Te.a,{className:"link",to:"/attractions/".concat(t._id),children:[Object(me.jsx)(tn,{src:t.images[0].url,alt:"pic"}),Object(me.jsxs)(en,{children:[Object(me.jsx)("p",{className:"name",children:t.name}),Object(me.jsxs)("p",{className:"subtitle",children:[t.description.substring(0,101),"..."]})]})]})},t._id),!s&&Object(me.jsx)("img",{alt:"marker",src:"/marker.png",height:"30px",width:"30px"})]})},ir=function(e){Object(A.a)(n,e);var t=Object(k.a)(n);function n(){var e;Object(S.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).renderMarkers=function(){return e.props.attractions.map((function(e){var t=e.geocode,n=e._id;return Object(me.jsx)(or,{lat:t.lat,lng:t.lng,attraction:e},n)}))},e}return Object(E.a)(n,[{key:"componentDidMount",value:function(){this.props.getAllAttractions()}},{key:"render",value:function(){return Object(me.jsx)(xe,{children:Object(me.jsx)("div",{style:{height:"90vh",width:"100%",marginTop:"20px",position:"relative"},children:Object(me.jsx)(ln.a,{bootstrapURLKeys:{key:"AIzaSyCkM2KZSzCVr9aS-Vuq_KhGDnLYR3vboEk"},defaultCenter:{lat:51.50809,lng:-.129137},defaultZoom:11,children:this.renderMarkers()})})})}}]),n}(r.Component),cr=Object(i.b)((function(e){var t=e.attractions;return{attractions:m.a.values(t)}}),{getAllAttractions:Q})(ir),dr=Object(ie.a)(Lt||(Lt=Object(oe.a)(["\n   * {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\nhtml {\n  /* font-size: 63.5%;/ */\n}\n\nbody {\n  /* font-family: 'Inter', Arial, Helvetica, sans-serif; */\n  line-height: 1;\n  font-weight: 400;\n  color: #555;\n  font-size: 18px;\n  -webkit-user-select: none; /* Safari */\n  -webkit-touch-callout: none; /* iOS Safari */\n  -khtml-user-select: none; /* Konqueror HTML */\n  -ms-user-select: none; /* Internet Explorer/Edge */\n  -moz-user-select: none; /* Old versions of Firefox */\n  user-select: none;\n}\n"]))),lr=function(e){Object(A.a)(n,e);var t=Object(k.a)(n);function n(){return Object(S.a)(this,n),t.apply(this,arguments)}return Object(E.a)(n,[{key:"componentDidMount",value:function(){this.props.isLoggedIn()}},{key:"render",value:function(){return Object(me.jsxs)(T.b,{history:C,children:[Object(me.jsx)(dr,{}),Object(me.jsx)(Gt,{}),Object(me.jsxs)(T.c,{children:[Object(me.jsx)(T.a,{exact:!0,path:"/",component:dn}),Object(me.jsx)(T.a,{exact:!0,path:"/register",component:Oe}),Object(me.jsx)(T.a,{exact:!0,path:"/login",component:ke}),Object(me.jsx)(T.a,{exact:!0,path:"/create",component:$t}),Object(me.jsx)(T.a,{exact:!0,path:"/attractions/search",component:tr}),Object(me.jsx)(T.a,{exact:!0,path:"/attractions/map",component:cr}),Object(me.jsx)(T.a,{exact:!0,path:"/attractions/:id/edit",component:ar}),Object(me.jsx)(T.a,{exact:!0,path:"/attractions/:id",component:Zn}),Object(me.jsx)(T.a,{exact:!0,path:"/myattractions",component:$n}),Object(me.jsx)(T.a,{path:"*",component:function(){return Object(me.jsx)("h2",{children:"PAGE NOT FOUND"})}})]})]})}}]),n}(a.a.Component),pr=Object(i.b)(null,{isLoggedIn:J})(lr);n(144).config();var ur={key:"root",storage:p.a,whitelist:["user"]},br=Object(d.a)(ur,w),jr=Object(c.c)(br,Object(c.a)(b.a)),hr=Object(d.b)(jr);o.a.render(Object(me.jsx)(i.a,{store:jr,children:Object(me.jsx)(u.a,{loading:null,persistor:hr,children:Object(me.jsx)(pr,{})})}),document.getElementById("root"))}},[[148,1,2]]]);
//# sourceMappingURL=main.e9e95436.chunk.js.map